Return-Path: <linux-arm-kernel-bounces+lists+linux-arm-kernel=lfdr.de@lists.infradead.org>
X-Original-To: lists+linux-arm-kernel@lfdr.de
Delivered-To: lists+linux-arm-kernel@lfdr.de
Received: from bombadil.infradead.org (bombadil.infradead.org [IPv6:2607:7c80:54:e::133])
	by mail.lfdr.de (Postfix) with ESMTPS id 3A34417D4DB
	for <lists+linux-arm-kernel@lfdr.de>; Sun,  8 Mar 2020 17:35:51 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
	d=lists.infradead.org; s=bombadil.20170209; h=Sender:
	Content-Transfer-Encoding:Content-Type:Cc:List-Subscribe:List-Help:List-Post:
	List-Archive:List-Unsubscribe:List-Id:MIME-Version:References:In-Reply-To:
	Message-Id:Date:Subject:To:From:Reply-To:Content-ID:Content-Description:
	Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:
	List-Owner; bh=LvCQNmBGpPUfTXmQbWVIFtYCeBe2ipKPxZdvg46ix+c=; b=dm0Yz4PuD+Esvh
	mrziw0ht6y8/B0lD7PhmpdTeIUpw049T71FgKF3j2mtzAIYWlKpe/1vDKKzihRTkMSJBOSTMoZ+mb
	09JI31L4xUkN/soU6YUaD88Bk3ajvDVNaa+LWGQNxkHPxsAo+VHu7XbBBvRt1ycJAxyvQIhlcih2v
	AJYiBp0L2TjhlVQRTbSqQ3lvf7FZEUavDbMAhwSe4Sq5WhgN0qUcQMKwkuwUA2WknfeXMQxpCWk4k
	v1EAJ6HAblFainylHj7xf2VKTakLu74l9UJZJWT0bY42NOiBwT3sO+BPZkAgsUeH/upM++1bdFn+1
	dJZDfT51exHEb/oXb56g==;
Received: from localhost ([127.0.0.1] helo=bombadil.infradead.org)
	by bombadil.infradead.org with esmtp (Exim 4.92.3 #3 (Red Hat Linux))
	id 1jAytv-00038c-1L; Sun, 08 Mar 2020 16:35:39 +0000
Received: from mx2.suse.de ([195.135.220.15])
 by bombadil.infradead.org with esmtps (Exim 4.92.3 #3 (Red Hat Linux))
 id 1jAyrJ-0000gn-PM
 for linux-arm-kernel@lists.infradead.org; Sun, 08 Mar 2020 16:33:01 +0000
X-Virus-Scanned: by amavisd-new at test-mx.suse.de
Received: from relay2.suse.de (unknown [195.135.220.254])
 by mx2.suse.de (Postfix) with ESMTP id 7AC29B23A;
 Sun,  8 Mar 2020 16:32:50 +0000 (UTC)
From: =?UTF-8?q?Andreas=20F=C3=A4rber?= <afaerber@suse.de>
To: linux-arm-kernel@lists.infradead.org
Subject: [RFC 09/11] irqchip: Add Sunplus SP7021 interrupt (mux) controller
Date: Sun,  8 Mar 2020 17:32:27 +0100
Message-Id: <20200308163230.4002-10-afaerber@suse.de>
X-Mailer: git-send-email 2.16.4
In-Reply-To: <20200308163230.4002-1-afaerber@suse.de>
References: <20200308163230.4002-1-afaerber@suse.de>
MIME-Version: 1.0
X-CRM114-Version: 20100106-BlameMichelson ( TRE 0.8.0 (BSD) ) MR-646709E3 
X-CRM114-CacheID: sfid-20200308_093258_155286_0BA3AC7C 
X-CRM114-Status: GOOD (  16.08  )
X-Spam-Score: -2.3 (--)
X-Spam-Report: SpamAssassin version 3.4.3 on bombadil.infradead.org summary:
 Content analysis details:   (-2.3 points)
 pts rule name              description
 ---- ---------------------- --------------------------------------------------
 -2.3 RCVD_IN_DNSWL_MED      RBL: Sender listed at https://www.dnswl.org/,
 medium trust [195.135.220.15 listed in list.dnswl.org]
 -0.0 RCVD_IN_MSPIKE_H3      RBL: Good reputation (+3)
 [195.135.220.15 listed in wl.mailspike.net]
 0.0 SPF_HELO_NONE          SPF: HELO does not publish an SPF Record
 -0.0 SPF_PASS               SPF: sender matches SPF record
 -0.0 RCVD_IN_MSPIKE_WL      Mailspike good senders
X-BeenThere: linux-arm-kernel@lists.infradead.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <linux-arm-kernel.lists.infradead.org>
List-Unsubscribe: <http://lists.infradead.org/mailman/options/linux-arm-kernel>, 
 <mailto:linux-arm-kernel-request@lists.infradead.org?subject=unsubscribe>
List-Archive: <http://lists.infradead.org/pipermail/linux-arm-kernel/>
List-Post: <mailto:linux-arm-kernel@lists.infradead.org>
List-Help: <mailto:linux-arm-kernel-request@lists.infradead.org?subject=help>
List-Subscribe: <http://lists.infradead.org/mailman/listinfo/linux-arm-kernel>, 
 <mailto:linux-arm-kernel-request@lists.infradead.org?subject=subscribe>
Cc: Jason Cooper <jason@lakedaemon.net>, Dvorkin Dmitry <dvorkin@tibbo.com>,
 linux-kernel@vger.kernel.org, Marc Zyngier <maz@kernel.org>,
 Thomas Gleixner <tglx@linutronix.de>,
 =?UTF-8?q?Andreas=20F=C3=A4rber?= <afaerber@suse.de>,
 =?UTF-8?q?Wells=20Lu=20=E5=91=82=E8=8A=B3=E9=A8=B0?= <wells.lu@sunplus.com>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Sender: "linux-arm-kernel" <linux-arm-kernel-bounces@lists.infradead.org>
Errors-To: linux-arm-kernel-bounces+lists+linux-arm-kernel=lfdr.de@lists.infradead.org

U2lnbmVkLW9mZi1ieTogQW5kcmVhcyBGw6RyYmVyIDxhZmFlcmJlckBzdXNlLmRlPgotLS0KIGRy
aXZlcnMvaXJxY2hpcC9NYWtlZmlsZSAgICAgfCAgIDEgKwogZHJpdmVycy9pcnFjaGlwL2lycS1z
cDcwMjEuYyB8IDI4NSArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysr
CiAyIGZpbGVzIGNoYW5nZWQsIDI4NiBpbnNlcnRpb25zKCspCiBjcmVhdGUgbW9kZSAxMDA2NDQg
ZHJpdmVycy9pcnFjaGlwL2lycS1zcDcwMjEuYwoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvaXJxY2hp
cC9NYWtlZmlsZSBiL2RyaXZlcnMvaXJxY2hpcC9NYWtlZmlsZQppbmRleCBlYWUwZDc4Y2JmMjIu
LmE2YjcwZDY2NjczOSAxMDA2NDQKLS0tIGEvZHJpdmVycy9pcnFjaGlwL01ha2VmaWxlCisrKyBi
L2RyaXZlcnMvaXJxY2hpcC9NYWtlZmlsZQpAQCAtMTA1LDMgKzEwNSw0IEBAIG9iai0kKENPTkZJ
R19NQURFUkFfSVJRKQkJKz0gaXJxLW1hZGVyYS5vCiBvYmotJChDT05GSUdfTFMxWF9JUlEpCQkJ
Kz0gaXJxLWxzMXgubwogb2JqLSQoQ09ORklHX1RJX1NDSV9JTlRSX0lSUUNISVApCSs9IGlycS10
aS1zY2ktaW50ci5vCiBvYmotJChDT05GSUdfVElfU0NJX0lOVEFfSVJRQ0hJUCkJKz0gaXJxLXRp
LXNjaS1pbnRhLm8KK29iai0kKENPTkZJR19BUkNIX1NVTlBMVVMpCQkrPSBpcnEtc3A3MDIxLm8K
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvaXJxY2hpcC9pcnEtc3A3MDIxLmMgYi9kcml2ZXJzL2lycWNo
aXAvaXJxLXNwNzAyMS5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4u
YTBiNzk3MmYyYWJiCi0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9pcnFjaGlwL2lycS1zcDcw
MjEuYwpAQCAtMCwwICsxLDI4NSBAQAorLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0y
LjAtb3ItbGF0ZXIKKy8qCisgKiBTdW5wbHVzIFBsdXMxIFNQNzAyMSBTb0MgaW50ZXJydXB0IGNv
bnRyb2xsZXIKKyAqCisgKiBDb3B5cmlnaHQgKGMpIDIwMjAgQW5kcmVhcyBGw6RyYmVyCisgKi8K
KworI2luY2x1ZGUgPGxpbnV4L2JpdGZpZWxkLmg+CisjaW5jbHVkZSA8bGludXgvYml0b3BzLmg+
CisjaW5jbHVkZSA8bGludXgvaXJxLmg+CisjaW5jbHVkZSA8bGludXgvaXJxY2hpcC5oPgorI2lu
Y2x1ZGUgPGxpbnV4L2lycWNoaXAvY2hhaW5lZF9pcnEuaD4KKyNpbmNsdWRlIDxsaW51eC9pcnFk
b21haW4uaD4KKyNpbmNsdWRlIDxsaW51eC9vZl9hZGRyZXNzLmg+CisjaW5jbHVkZSA8bGludXgv
b2ZfaXJxLmg+CisKKyNkZWZpbmUgUkVHX0lOVENfSU5UUl9UWVBFKGkpCQkoMHgwICsgKGkpICog
NCkKKyNkZWZpbmUgUkVHX0lOVENfSU5UUl9QT0xBUklUWShpKQkoMHgxYyArIChpKSAqIDQpCisj
ZGVmaW5lIFJFR19JTlRDX0lOVFJfUFJJTyhpKQkJKDB4MzggKyAoaSkgKiA0KQorI2RlZmluZSBS
RUdfSU5UQ19JTlRSX01BU0soaSkJCSgweDU0ICsgKGkpICogNCkKKworI2RlZmluZSBSRUdfSU5U
Q19JTlRSX0NMUihpKQkJKDB4MCArIChpKSAqIDQpCisjZGVmaW5lIFJFR19JTlRDX01BU0tFRF9G
SVFTKGkpCQkoMHgxYyArIChpKSAqIDQpCisjZGVmaW5lIFJFR19JTlRDX01BU0tFRF9JUlFTKGkp
CQkoMHgzOCArIChpKSAqIDQpCisjZGVmaW5lIFJFR19JTlRDX0lOVFJfR1JPVVAJCTB4N2MKKwor
I2RlZmluZSBJTlRDX0lOVFJfR1JPVVBfRklRCUdFTk1BU0soNiwgMCkKKyNkZWZpbmUgSU5UQ19J
TlRSX0dST1VQX0lSUQlHRU5NQVNLKDE0LCA4KQorCitzdHJ1Y3Qgc3A3MDIxX2ludGNfZGF0YSB7
CisJdm9pZCBfX2lvbWVtCQkqYmFzZTA7CisJdm9pZCBfX2lvbWVtCQkqYmFzZTE7CisJaW50CQkJ
ZXh0MF9pcnE7CisJaW50CQkJZXh0MV9pcnE7CisJc3RydWN0IGlycV9jaGlwCQljaGlwOworCXN0
cnVjdCBpcnFfZG9tYWluCSpkb21haW47CisJcmF3X3NwaW5sb2NrX3QJCWxvY2s7Cit9OworCitz
dGF0aWMgdm9pZCBzcDcwMjFfaW50Y19leHQwX2lycV9oYW5kbGUoc3RydWN0IGlycV9kZXNjICpk
ZXNjKQoreworCXN0cnVjdCBzcDcwMjFfaW50Y19kYXRhICpzID0gaXJxX2Rlc2NfZ2V0X2hhbmRs
ZXJfZGF0YShkZXNjKTsKKwlzdHJ1Y3QgaXJxX2NoaXAgKmNoaXAgPSBpcnFfZGVzY19nZXRfY2hp
cChkZXNjKTsKKwl1MzIgbWFzaywgbWFza2VkOworCWludCBpLCBqOworCisJY2hhaW5lZF9pcnFf
ZW50ZXIoY2hpcCwgZGVzYyk7CisKKwltYXNrID0gcmVhZGxfcmVsYXhlZChzLT5iYXNlMSArIFJF
R19JTlRDX0lOVFJfR1JPVVApOworCW1hc2sgPSBGSUVMRF9HRVQoSU5UQ19JTlRSX0dST1VQX0lS
USwgbWFzayk7CisJd2hpbGUgKG1hc2spIHsKKwkJaSA9IGZscyhtYXNrKSAtIDE7CisJCW1hc2sg
Jj0gfkJJVChpKTsKKworCQltYXNrZWQgPSByZWFkbF9yZWxheGVkKHMtPmJhc2UxICsgUkVHX0lO
VENfTUFTS0VEX0lSUVMoaSkpOworCQl3aGlsZSAobWFza2VkKSB7CisJCQlqID0gZmxzKG1hc2tl
ZCkgLSAxOworCQkJbWFza2VkICY9IH5CSVQoaik7CisKKwkJCWdlbmVyaWNfaGFuZGxlX2lycShp
cnFfZmluZF9tYXBwaW5nKHMtPmRvbWFpbiwKKwkJCQkJCQkgICAgaSAqIDMyICsgaikpOworCQl9
CisJfQorCisJY2hhaW5lZF9pcnFfZXhpdChjaGlwLCBkZXNjKTsKK30KKworc3RhdGljIHZvaWQg
c3A3MDIxX2ludGNfZXh0MV9pcnFfaGFuZGxlKHN0cnVjdCBpcnFfZGVzYyAqZGVzYykKK3sKKwlz
dHJ1Y3Qgc3A3MDIxX2ludGNfZGF0YSAqcyA9IGlycV9kZXNjX2dldF9oYW5kbGVyX2RhdGEoZGVz
Yyk7CisJc3RydWN0IGlycV9jaGlwICpjaGlwID0gaXJxX2Rlc2NfZ2V0X2NoaXAoZGVzYyk7CisJ
dTMyIG1hc2ssIG1hc2tlZDsKKwlpbnQgaSwgajsKKworCWNoYWluZWRfaXJxX2VudGVyKGNoaXAs
IGRlc2MpOworCisJbWFzayA9IHJlYWRsX3JlbGF4ZWQocy0+YmFzZTEgKyBSRUdfSU5UQ19JTlRS
X0dST1VQKTsKKwltYXNrID0gRklFTERfR0VUKElOVENfSU5UUl9HUk9VUF9GSVEsIG1hc2spOwor
CXdoaWxlIChtYXNrKSB7CisJCWkgPSBmbHMobWFzaykgLSAxOworCQltYXNrICY9IH5CSVQoaSk7
CisKKwkJbWFza2VkID0gcmVhZGxfcmVsYXhlZChzLT5iYXNlMSArIFJFR19JTlRDX01BU0tFRF9G
SVFTKGkpKTsKKwkJd2hpbGUgKG1hc2tlZCkgeworCQkJaiA9IGZscyhtYXNrZWQpIC0gMTsKKwkJ
CW1hc2tlZCAmPSB+QklUKGopOworCisJCQlnZW5lcmljX2hhbmRsZV9pcnEoaXJxX2ZpbmRfbWFw
cGluZyhzLT5kb21haW4sCisJCQkJCQkJICAgIGkgKiAzMiArIGopKTsKKwkJfQorCX0KKworCWNo
YWluZWRfaXJxX2V4aXQoY2hpcCwgZGVzYyk7Cit9CisKK3N0YXRpYyB2b2lkIHNwNzAyMV9pbnRj
X2Fja19pcnEoc3RydWN0IGlycV9kYXRhICpkYXRhKQoreworCXN0cnVjdCBzcDcwMjFfaW50Y19k
YXRhICpzID0gaXJxX2RhdGFfZ2V0X2lycV9jaGlwX2RhdGEoZGF0YSk7CisJdW5zaWduZWQgaW50
IGlkeDsKKwl1MzIgbWFzazsKKworCWlkeCA9IGRhdGEtPmh3aXJxIC8gMzI7CisKKwltYXNrID0g
QklUKGRhdGEtPmh3aXJxICUgMzIpOworCXdyaXRlbF9yZWxheGVkKG1hc2ssIHMtPmJhc2UxICsg
UkVHX0lOVENfSU5UUl9DTFIoaWR4KSk7Cit9CisKK3N0YXRpYyB2b2lkIHNwNzAyMV9pbnRjX21h
c2tfaXJxKHN0cnVjdCBpcnFfZGF0YSAqZGF0YSkKK3sKKwlzdHJ1Y3Qgc3A3MDIxX2ludGNfZGF0
YSAqcyA9IGlycV9kYXRhX2dldF9pcnFfY2hpcF9kYXRhKGRhdGEpOworCXVuc2lnbmVkIGxvbmcg
ZmxhZ3M7CisJdW5zaWduZWQgaW50IGlkeDsKKwl1MzIgbWFzazsKKworCWlkeCA9IGRhdGEtPmh3
aXJxIC8gMzI7CisKKwlyYXdfc3Bpbl9sb2NrX2lycXNhdmUoJnMtPmxvY2ssIGZsYWdzKTsKKwor
CW1hc2sgPSByZWFkbF9yZWxheGVkKHMtPmJhc2UwICsgUkVHX0lOVENfSU5UUl9NQVNLKGlkeCkp
OworCW1hc2sgJj0gfkJJVChkYXRhLT5od2lycSAlIDMyKTsKKwl3cml0ZWxfcmVsYXhlZChtYXNr
LCBzLT5iYXNlMCArIFJFR19JTlRDX0lOVFJfTUFTSyhpZHgpKTsKKworCXJhd19zcGluX3VubG9j
a19pcnFyZXN0b3JlKCZzLT5sb2NrLCBmbGFncyk7Cit9CisKK3N0YXRpYyB2b2lkIHNwNzAyMV9p
bnRjX3VubWFza19pcnEoc3RydWN0IGlycV9kYXRhICpkYXRhKQoreworCXN0cnVjdCBzcDcwMjFf
aW50Y19kYXRhICpzID0gaXJxX2RhdGFfZ2V0X2lycV9jaGlwX2RhdGEoZGF0YSk7CisJdW5zaWdu
ZWQgbG9uZyBmbGFnczsKKwl1bnNpZ25lZCBpbnQgaWR4OworCXUzMiBtYXNrOworCisJaWR4ID0g
ZGF0YS0+aHdpcnEgLyAzMjsKKworCXJhd19zcGluX2xvY2tfaXJxc2F2ZSgmcy0+bG9jaywgZmxh
Z3MpOworCisJbWFzayA9IHJlYWRsX3JlbGF4ZWQocy0+YmFzZTAgKyBSRUdfSU5UQ19JTlRSX01B
U0soaWR4KSk7CisJbWFzayB8PSBCSVQoZGF0YS0+aHdpcnEgJSAzMik7CisJd3JpdGVsX3JlbGF4
ZWQobWFzaywgcy0+YmFzZTAgKyBSRUdfSU5UQ19JTlRSX01BU0soaWR4KSk7CisKKwlyYXdfc3Bp
bl91bmxvY2tfaXJxcmVzdG9yZSgmcy0+bG9jaywgZmxhZ3MpOworfQorCitzdGF0aWMgaW50IHNw
NzAyMV9pbnRjX3NldF9pcnFfdHlwZShzdHJ1Y3QgaXJxX2RhdGEgKmRhdGEsIHVuc2lnbmVkIGlu
dCBmbG93X3R5cGUpCit7CisJc3RydWN0IHNwNzAyMV9pbnRjX2RhdGEgKnMgPSBpcnFfZGF0YV9n
ZXRfaXJxX2NoaXBfZGF0YShkYXRhKTsKKwl1bnNpZ25lZCBsb25nIGZsYWdzOworCXVuc2lnbmVk
IGludCBpZHg7CisJdTMyIG1hc2ssIHR5cGUsIHBvbGFyaXR5OworCisJaWR4ID0gZGF0YS0+aHdp
cnEgLyAzMjsKKwltYXNrID0gQklUKGRhdGEtPmh3aXJxICUgMzIpOworCisJaWYgKGZsb3dfdHlw
ZSAmIElSUV9UWVBFX0xFVkVMX01BU0spCisJCWlycV9zZXRfY2hpcF9oYW5kbGVyX25hbWVfbG9j
a2VkKGRhdGEsICZzLT5jaGlwLCBoYW5kbGVfbGV2ZWxfaXJxLCBOVUxMKTsKKwllbHNlCisJCWly
cV9zZXRfY2hpcF9oYW5kbGVyX25hbWVfbG9ja2VkKGRhdGEsICZzLT5jaGlwLCBoYW5kbGVfZWRn
ZV9pcnEsIE5VTEwpOworCisJcmF3X3NwaW5fbG9ja19pcnFzYXZlKCZzLT5sb2NrLCBmbGFncyk7
CisKKwl0eXBlID0gcmVhZGxfcmVsYXhlZChzLT5iYXNlMCArIFJFR19JTlRDX0lOVFJfVFlQRShp
ZHgpKTsKKwlwb2xhcml0eSA9IHJlYWRsX3JlbGF4ZWQocy0+YmFzZTAgKyBSRUdfSU5UQ19JTlRS
X1BPTEFSSVRZKGlkeCkpOworCisJc3dpdGNoIChmbG93X3R5cGUpIHsKKwljYXNlIElSUV9UWVBF
X0VER0VfUklTSU5HOgorCQl0eXBlIHw9IG1hc2s7CisJCXBvbGFyaXR5ICY9IH5tYXNrOworCQli
cmVhazsKKwljYXNlIElSUV9UWVBFX0VER0VfRkFMTElORzoKKwkJdHlwZSB8PSBtYXNrOworCQlw
b2xhcml0eSB8PSBtYXNrOworCQlicmVhazsKKwljYXNlIElSUV9UWVBFX0xFVkVMX0hJR0g6CisJ
CXR5cGUgJj0gfm1hc2s7CisJCXBvbGFyaXR5ICY9IH5tYXNrOworCQlicmVhazsKKwljYXNlIElS
UV9UWVBFX0xFVkVMX0xPVzoKKwkJdHlwZSAmPSB+bWFzazsKKwkJcG9sYXJpdHkgfD0gbWFzazsK
KwkJYnJlYWs7CisJZGVmYXVsdDoKKwkJcmF3X3NwaW5fdW5sb2NrX2lycXJlc3RvcmUoJnMtPmxv
Y2ssIGZsYWdzKTsKKwkJcmV0dXJuIC1FQkFEUjsKKwl9CisKKwl3cml0ZWxfcmVsYXhlZCh0eXBl
LCBzLT5iYXNlMCArIFJFR19JTlRDX0lOVFJfVFlQRShpZHgpKTsKKwl3cml0ZWxfcmVsYXhlZChw
b2xhcml0eSwgcy0+YmFzZTAgKyBSRUdfSU5UQ19JTlRSX1BPTEFSSVRZKGlkeCkpOworCisJcmF3
X3NwaW5fdW5sb2NrX2lycXJlc3RvcmUoJnMtPmxvY2ssIGZsYWdzKTsKKworCXJldHVybiBJUlFf
U0VUX01BU0tfT0s7Cit9CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3QgaXJxX2NoaXAgc3A3MDIxX2lu
dGNfaXJxX2NoaXAgPSB7CisJLm5hbWUJCQk9ICJTUDcwMjEtQSIsCisJLmlycV9hY2sJCT0gc3A3
MDIxX2ludGNfYWNrX2lycSwKKwkuaXJxX21hc2sJCT0gc3A3MDIxX2ludGNfbWFza19pcnEsCisJ
LmlycV91bm1hc2sJCT0gc3A3MDIxX2ludGNfdW5tYXNrX2lycSwKKwkuaXJxX3NldF90eXBlCQk9
IHNwNzAyMV9pbnRjX3NldF9pcnFfdHlwZSwKK307CisKK3N0YXRpYyBpbnQgc3A3MDIxX2ludGNf
aXJxX2RvbWFpbl9tYXAoc3RydWN0IGlycV9kb21haW4gKmQsCisJCXVuc2lnbmVkIGludCBpcnEs
IGlycV9od19udW1iZXJfdCBodykKK3sKKwlzdHJ1Y3Qgc3A3MDIxX2ludGNfZGF0YSAqcyA9IGQt
Pmhvc3RfZGF0YTsKKwl1bnNpZ25lZCBpbnQgaWR4OworCXUzMiBtYXNrLCB0eXBlOworCisJaWR4
ID0gaHcgLyAzMjsKKwltYXNrID0gQklUKGh3ICUgMzIpOworCisJdHlwZSA9IHJlYWRsX3JlbGF4
ZWQocy0+YmFzZTAgKyBSRUdfSU5UQ19JTlRSX1RZUEUoaWR4KSk7CisKKwlpcnFfc2V0X2NoaXBf
YW5kX2hhbmRsZXIoaXJxLCAmcy0+Y2hpcCwgKHR5cGUgJiBtYXNrKSA/IGhhbmRsZV9lZGdlX2ly
cSA6IGhhbmRsZV9sZXZlbF9pcnEpOworCWlycV9zZXRfY2hpcF9kYXRhKGlycSwgcyk7CisJaXJx
X3NldF9wcm9iZShpcnEpOworCisJcmV0dXJuIDA7Cit9CisKK3N0YXRpYyBjb25zdCBzdHJ1Y3Qg
aXJxX2RvbWFpbl9vcHMgc3A3MDIxX2ludGNfZG9tYWluX29wcyA9IHsKKwkueGxhdGUJPSBpcnFf
ZG9tYWluX3hsYXRlX29uZWNlbGwsCisJLm1hcAk9IHNwNzAyMV9pbnRjX2lycV9kb21haW5fbWFw
LAorfTsKKworaW50IF9faW5pdCBzcDcwMjFfaW50Y19pbml0KHN0cnVjdCBkZXZpY2Vfbm9kZSAq
bm9kZSwgc3RydWN0IGRldmljZV9ub2RlICpwYXJlbnQpCit7CisJc3RydWN0IHNwNzAyMV9pbnRj
X2RhdGEgKnM7CisJdm9pZCBfX2lvbWVtICpiYXNlMCwgKmJhc2UxOworCWludCBpOworCisJYmFz
ZTAgPSBvZl9pb21hcChub2RlLCAwKTsKKwlpZiAoIWJhc2UwKQorCQlyZXR1cm4gLUVJTzsKKwor
CWJhc2UxID0gb2ZfaW9tYXAobm9kZSwgMSk7CisJaWYgKCFiYXNlMSkKKwkJcmV0dXJuIC1FSU87
CisKKwlzID0ga3phbGxvYyhzaXplb2YoKnMpLCBHRlBfS0VSTkVMKTsKKwlpZiAoIXMpCisJCXJl
dHVybiAtRU5PTUVNOworCisJcy0+YmFzZTAgPSBiYXNlMDsKKwlzLT5iYXNlMSA9IGJhc2UxOwor
CXMtPmNoaXAgPSBzcDcwMjFfaW50Y19pcnFfY2hpcDsKKworCXMtPmV4dDBfaXJxID0gaXJxX29m
X3BhcnNlX2FuZF9tYXAobm9kZSwgMCk7CisJaWYgKHMtPmV4dDBfaXJxIDw9IDApIHsKKwkJa2Zy
ZWUocyk7CisJCXJldHVybiAtRUlOVkFMOworCX0KKworCXMtPmV4dDFfaXJxID0gaXJxX29mX3Bh
cnNlX2FuZF9tYXAobm9kZSwgMSk7CisJaWYgKHMtPmV4dDFfaXJxIDw9IDApIHsKKwkJa2ZyZWUo
cyk7CisJCXJldHVybiAtRUlOVkFMOworCX0KKworCXJhd19zcGluX2xvY2tfaW5pdCgmcy0+bG9j
ayk7CisKKwlmb3IgKGkgPSAwOyBpIDwgNzsgaSsrKSB7CisJCXdyaXRlbF9yZWxheGVkKDAsIHMt
PmJhc2UwICsgUkVHX0lOVENfSU5UUl9NQVNLKGkpKTsKKwkJd3JpdGVsX3JlbGF4ZWQofjAsIHMt
PmJhc2UwICsgUkVHX0lOVENfSU5UUl9UWVBFKGkpKTsKKwkJd3JpdGVsX3JlbGF4ZWQoMCwgcy0+
YmFzZTAgKyBSRUdfSU5UQ19JTlRSX1BPTEFSSVRZKGkpKTsKKworCQkvKiBpcnEsIG5vdCBmaXEg
Ki8KKwkJd3JpdGVsX3JlbGF4ZWQofjAsIHMtPmJhc2UwICsgUkVHX0lOVENfSU5UUl9QUklPKGkp
KTsKKworCQl3cml0ZWxfcmVsYXhlZCh+MCwgcy0+YmFzZTEgKyBSRUdfSU5UQ19JTlRSX0NMUihp
KSk7CisJfQorCisJcy0+ZG9tYWluID0gaXJxX2RvbWFpbl9hZGRfbGluZWFyKG5vZGUsIDIwMCwg
JnNwNzAyMV9pbnRjX2RvbWFpbl9vcHMsCisJCQkJCSAgcyk7CisJaWYgKCFzLT5kb21haW4pIHsK
KwkJa2ZyZWUocyk7CisJCXJldHVybiAtRU5PTUVNOworCX0KKworCWlycV9zZXRfY2hhaW5lZF9o
YW5kbGVyX2FuZF9kYXRhKHMtPmV4dDBfaXJxLCBzcDcwMjFfaW50Y19leHQwX2lycV9oYW5kbGUs
IHMpOworCWlycV9zZXRfY2hhaW5lZF9oYW5kbGVyX2FuZF9kYXRhKHMtPmV4dDFfaXJxLCBzcDcw
MjFfaW50Y19leHQxX2lycV9oYW5kbGUsIHMpOworCisJcmV0dXJuIDA7Cit9CitJUlFDSElQX0RF
Q0xBUkUoc3A3MDIxX2ludGMsICJzdW5wbHVzLHNwNzAyMS1pbnRjIiwgc3A3MDIxX2ludGNfaW5p
dCk7Ci0tIAoyLjE2LjQKCgpfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fXwpsaW51eC1hcm0ta2VybmVsIG1haWxpbmcgbGlzdApsaW51eC1hcm0ta2VybmVsQGxp
c3RzLmluZnJhZGVhZC5vcmcKaHR0cDovL2xpc3RzLmluZnJhZGVhZC5vcmcvbWFpbG1hbi9saXN0
aW5mby9saW51eC1hcm0ta2VybmVsCg==
