Return-Path: <linux-arm-kernel-bounces+lists+linux-arm-kernel=lfdr.de@lists.infradead.org>
X-Original-To: lists+linux-arm-kernel@lfdr.de
Delivered-To: lists+linux-arm-kernel@lfdr.de
Received: from bombadil.infradead.org (bombadil.infradead.org [IPv6:2607:7c80:54:e::133])
	by mail.lfdr.de (Postfix) with ESMTPS id 3BCB2AE49E
	for <lists+linux-arm-kernel@lfdr.de>; Tue, 10 Sep 2019 09:26:00 +0200 (CEST)
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
	d=lists.infradead.org; s=bombadil.20170209; h=Sender:Content-Type:
	Content-Transfer-Encoding:Cc:List-Subscribe:List-Help:List-Post:List-Archive:
	List-Unsubscribe:List-Id:In-Reply-To:MIME-Version:Date:Message-ID:From:
	References:To:Subject:Reply-To:Content-ID:Content-Description:Resent-Date:
	Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:List-Owner;
	 bh=IGNlajyn/UZ6/pfPWsQLneayZoWFzIGrVUp9HvyEoSY=; b=KkTCJqfCrBp6tCgiuF7R4BYjd
	IcVM4hLBymBMbPQ5kEuBqXMrKRd6Ypa5spa243lsa2/2VpzpL6M2+iTvN5pVF2gIjKKlXcYsEmZHu
	iqe5CXjvlVhOfmfPrb044isv00aQbaBWKc/OFkKASdyxoIl6sywH6NxA3Gb4nEmqlLnHcQtlKCUwI
	3rXubDstqbyT8twB7ULBZRVCnNMbC09SctlzS/bj7uKpUhVcx+/yOA03CejMltL/5yYHm5BzSR8QK
	+G0gJkltEARMd62xvN1klyKykvaT+VuILdw8Uc3zfpxGe/EM5K3LWHlWyckY6un76iGsAhWcuXVw+
	PNe07OUWg==;
Received: from localhost ([127.0.0.1] helo=bombadil.infradead.org)
	by bombadil.infradead.org with esmtp (Exim 4.92 #3 (Red Hat Linux))
	id 1i7aX7-0002ph-HD; Tue, 10 Sep 2019 07:25:49 +0000
Received: from lelv0143.ext.ti.com ([198.47.23.248])
 by bombadil.infradead.org with esmtps (Exim 4.92 #3 (Red Hat Linux))
 id 1i7aWl-0002pM-Oy
 for linux-arm-kernel@lists.infradead.org; Tue, 10 Sep 2019 07:25:30 +0000
Received: from fllv0034.itg.ti.com ([10.64.40.246])
 by lelv0143.ext.ti.com (8.15.2/8.15.2) with ESMTP id x8A7PKAO068352;
 Tue, 10 Sep 2019 02:25:20 -0500
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=ti.com;
 s=ti-com-17Q1; t=1568100320;
 bh=uFGnXT9Zf35DU0KpuV8PjMA2Ovqv+DJoR+ooISk2U3Q=;
 h=Subject:To:CC:References:From:Date:In-Reply-To;
 b=P3xQddR4bk5Rp7C3E/bZTfVD/bxmebnxoekYFukO8UEYHvH4Euj7zoI3X6B2qyoI8
 GvwWAHUoVlFoFyDwv6dqTvnji6M3l9BZc9cgc2PEE+4qqApGa0C3qBctF84goAUrJN
 rLmtxaXYLxhL/54uQzMh3mxMSdBmOBggsuV3xcVU=
Received: from DLEE100.ent.ti.com (dlee100.ent.ti.com [157.170.170.30])
 by fllv0034.itg.ti.com (8.15.2/8.15.2) with ESMTPS id x8A7PKO9024843
 (version=TLSv1.2 cipher=AES256-GCM-SHA384 bits=256 verify=FAIL);
 Tue, 10 Sep 2019 02:25:20 -0500
Received: from DLEE104.ent.ti.com (157.170.170.34) by DLEE100.ent.ti.com
 (157.170.170.30) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256) id 15.1.1713.5; Tue, 10
 Sep 2019 02:25:19 -0500
Received: from lelv0327.itg.ti.com (10.180.67.183) by DLEE104.ent.ti.com
 (157.170.170.34) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256) id 15.1.1713.5 via
 Frontend Transport; Tue, 10 Sep 2019 02:25:19 -0500
Received: from [10.250.98.116] (ileax41-snat.itg.ti.com [10.172.224.153])
 by lelv0327.itg.ti.com (8.15.2/8.15.2) with ESMTP id x8A7PFVg028532;
 Tue, 10 Sep 2019 02:25:16 -0500
Subject: Re: [PATCH v2 10/14] dmaengine: ti: New driver for K3 UDMA - split#3:
 alloc/free chan_resources
To: Peter Ujfalusi <peter.ujfalusi@ti.com>, <vkoul@kernel.org>,
 <robh+dt@kernel.org>, <nm@ti.com>, <ssantosh@kernel.org>
References: <20190730093450.12664-1-peter.ujfalusi@ti.com>
 <20190730093450.12664-11-peter.ujfalusi@ti.com>
From: Grygorii Strashko <grygorii.strashko@ti.com>
Message-ID: <9091414a-6b9f-24c2-1637-2a8c0ac78dee@ti.com>
Date: Tue, 10 Sep 2019 10:25:14 +0300
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:60.0) Gecko/20100101
 Thunderbird/60.8.0
MIME-Version: 1.0
In-Reply-To: <20190730093450.12664-11-peter.ujfalusi@ti.com>
Content-Language: en-US
X-EXCLAIMER-MD-CONFIG: e1e8a2fd-e40a-4ac6-ac9b-f7e9cc9ee180
X-CRM114-Version: 20100106-BlameMichelson ( TRE 0.8.0 (BSD) ) MR-646709E3 
X-CRM114-CacheID: sfid-20190910_002527_902924_C2FB9DCB 
X-CRM114-Status: GOOD (  27.63  )
X-Spam-Score: -2.5 (--)
X-Spam-Report: SpamAssassin version 3.4.2 on bombadil.infradead.org summary:
 Content analysis details:   (-2.5 points)
 pts rule name              description
 ---- ---------------------- --------------------------------------------------
 -2.3 RCVD_IN_DNSWL_MED      RBL: Sender listed at https://www.dnswl.org/,
 medium trust [198.47.23.248 listed in list.dnswl.org]
 -0.0 SPF_PASS               SPF: sender matches SPF record
 0.0 SPF_HELO_NONE          SPF: HELO does not publish an SPF Record
 -0.1 DKIM_VALID Message has at least one valid DKIM or DK signature
 -0.1 DKIM_VALID_AU          Message has a valid DKIM or DK signature from
 author's domain
 0.1 DKIM_SIGNED            Message has a DKIM or DK signature, not necessarily
 valid
 -0.1 DKIM_VALID_EF          Message has a valid DKIM or DK signature from
 envelope-from domain
 -0.0 DKIMWL_WL_HIGH         DKIMwl.org - Whitelisted High sender
X-BeenThere: linux-arm-kernel@lists.infradead.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <linux-arm-kernel.lists.infradead.org>
List-Unsubscribe: <http://lists.infradead.org/mailman/options/linux-arm-kernel>, 
 <mailto:linux-arm-kernel-request@lists.infradead.org?subject=unsubscribe>
List-Archive: <http://lists.infradead.org/pipermail/linux-arm-kernel/>
List-Post: <mailto:linux-arm-kernel@lists.infradead.org>
List-Help: <mailto:linux-arm-kernel-request@lists.infradead.org?subject=help>
List-Subscribe: <http://lists.infradead.org/mailman/listinfo/linux-arm-kernel>, 
 <mailto:linux-arm-kernel-request@lists.infradead.org?subject=subscribe>
Cc: devicetree@vger.kernel.org, lokeshvutla@ti.com, j-keerthy@ti.com,
 linux-kernel@vger.kernel.org, t-kristo@ti.com, tony@atomide.com,
 dmaengine@vger.kernel.org, dan.j.williams@intel.com,
 linux-arm-kernel@lists.infradead.org
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset="utf-8"; Format="flowed"
Sender: "linux-arm-kernel" <linux-arm-kernel-bounces@lists.infradead.org>
Errors-To: linux-arm-kernel-bounces+lists+linux-arm-kernel=lfdr.de@lists.infradead.org

CgpPbiAzMC8wNy8yMDE5IDEyOjM0LCBQZXRlciBVamZhbHVzaSB3cm90ZToKPiBTcGxpdCBwYXRj
aCBmb3IgcmV2aWV3IGNvbnRhaW5pbmc6IGNoYW5uZWwgcnNvdXJjZSBhbGxvY2F0aW9uIGFuZCBm
cmVlCj4gZnVuY3Rpb25zLgo+IAo+IERNQSBkcml2ZXIgZm9yCj4gVGV4YXMgSW5zdHJ1bWVudHMg
SzMgTkFWU1MgVW5pZmllZCBETUEg4oCTIFBlcmlwaGVyYWwgUm9vdCBDb21wbGV4IChVRE1BLVAp
Cj4gCj4gVGhlIFVETUEtUCBpcyBpbnRlbmRlZCB0byBwZXJmb3JtIHNpbWlsYXIgKGJ1dCBzaWdu
aWZpY2FudGx5IHVwZ3JhZGVkKSBmdW5jdGlvbnMKPiBhcyB0aGUgcGFja2V0LW9yaWVudGVkIERN
QSB1c2VkIG9uIHByZXZpb3VzIFNvQyBkZXZpY2VzLiBUaGUgVURNQS1QIG1vZHVsZQo+IHN1cHBv
cnRzIHRoZSB0cmFuc21pc3Npb24gYW5kIHJlY2VwdGlvbiBvZiB2YXJpb3VzIHBhY2tldCB0eXBl
cy4gVGhlIFVETUEtUCBpcwo+IGFyY2hpdGVjdGVkIHRvIGZhY2lsaXRhdGUgdGhlIHNlZ21lbnRh
dGlvbiBhbmQgcmVhc3NlbWJseSBvZiBTb0MgRE1BIGRhdGEKPiBzdHJ1Y3R1cmUgY29tcGxpYW50
IHBhY2tldHMgdG8vZnJvbSBzbWFsbGVyIGRhdGEgYmxvY2tzIHRoYXQgYXJlIG5hdGl2ZWx5Cj4g
Y29tcGF0aWJsZSB3aXRoIHRoZSBzcGVjaWZpYyByZXF1aXJlbWVudHMgb2YgZWFjaCBjb25uZWN0
ZWQgcGVyaXBoZXJhbC4gTXVsdGlwbGUKPiBUeCBhbmQgUnggY2hhbm5lbHMgYXJlIHByb3ZpZGVk
IHdpdGhpbiB0aGUgRE1BIHdoaWNoIGFsbG93IG11bHRpcGxlIHNlZ21lbnRhdGlvbgo+IG9yIHJl
YXNzZW1ibHkgb3BlcmF0aW9ucyB0byBiZSBvbmdvaW5nLiBUaGUgRE1BIGNvbnRyb2xsZXIgbWFp
bnRhaW5zIHN0YXRlCj4gaW5mb3JtYXRpb24gZm9yIGVhY2ggb2YgdGhlIGNoYW5uZWxzIHdoaWNo
IGFsbG93cyBwYWNrZXQgc2VnbWVudGF0aW9uIGFuZAo+IHJlYXNzZW1ibHkgb3BlcmF0aW9ucyB0
byBiZSB0aW1lIGRpdmlzaW9uIG11bHRpcGxleGVkIGJldHdlZW4gY2hhbm5lbHMgaW4gb3JkZXIK
PiB0byBzaGFyZSB0aGUgdW5kZXJseWluZyBETUEgaGFyZHdhcmUuIEFuIGV4dGVybmFsIERNQSBz
Y2hlZHVsZXIgaXMgdXNlZCB0bwo+IGNvbnRyb2wgdGhlIG9yZGVyaW5nIGFuZCByYXRlIGF0IHdo
aWNoIHRoaXMgbXVsdGlwbGV4aW5nIG9jY3VycyBmb3IgVHJhbnNtaXQKPiBvcGVyYXRpb25zLiBU
aGUgb3JkZXJpbmcgYW5kIHJhdGUgb2YgUmVjZWl2ZSBvcGVyYXRpb25zIGlzIGluZGlyZWN0bHkg
Y29udHJvbGxlZAo+IGJ5IHRoZSBvcmRlciBpbiB3aGljaCBibG9ja3MgYXJlIHB1c2hlZCBpbnRv
IHRoZSBETUEgb24gdGhlIFJ4IFBTSS1MIGludGVyZmFjZS4KPiAKPiBUaGUgVURNQS1QIGFsc28g
c3VwcG9ydHMgYWN0aW5nIGFzIGJvdGggYSBVVEMgYW5kIFVETUEtQyBmb3IgaXRzIGludGVybmFs
Cj4gY2hhbm5lbHMuIENoYW5uZWxzIGluIHRoZSBVRE1BLVAgY2FuIGJlIGNvbmZpZ3VyZWQgdG8g
YmUgZWl0aGVyIFBhY2tldC1CYXNlZCBvcgo+IFRoaXJkLVBhcnR5IGNoYW5uZWxzIG9uIGEgY2hh
bm5lbCBieSBjaGFubmVsIGJhc2lzLgo+IAo+IFRoZSBpbml0aWFsIGRyaXZlciBzdXBwb3J0czoK
PiAtIE1FTV9UT19NRU0gKFRSIG1vZGUpCj4gLSBERVZfVE9fTUVNIChQYWNrZXQgLyBUUiBtb2Rl
KQo+IC0gTUVNX1RPX0RFViAoUGFja2V0IC8gVFIgbW9kZSkKPiAtIEN5Y2xpYyAoUGFja2V0IC8g
VFIgbW9kZSkKPiAtIE1ldGFkYXRhIGZvciBkZXNjcmlwdG9ycwo+IAo+IFNpZ25lZC1vZmYtYnk6
IFBldGVyIFVqZmFsdXNpIDxwZXRlci51amZhbHVzaUB0aS5jb20+Cj4gLS0tCj4gICBkcml2ZXJz
L2RtYS90aS9rMy11ZG1hLmMgfCA3ODAgKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysr
KysrKysrCj4gICAxIGZpbGUgY2hhbmdlZCwgNzgwIGluc2VydGlvbnMoKykKPiAKPiBkaWZmIC0t
Z2l0IGEvZHJpdmVycy9kbWEvdGkvazMtdWRtYS5jIGIvZHJpdmVycy9kbWEvdGkvazMtdWRtYS5j
Cj4gaW5kZXggNTJjY2M2ZDQ2ZGU5Li4wZGUzOGRiMDNiOGQgMTAwNjQ0Cj4gLS0tIGEvZHJpdmVy
cy9kbWEvdGkvazMtdWRtYS5jCj4gKysrIGIvZHJpdmVycy9kbWEvdGkvazMtdWRtYS5jCj4gQEAg
LTEwMzksNiArMTAzOSw3ODYgQEAgc3RhdGljIGlycXJldHVybl90IHVkbWFfdWRtYV9pcnFfaGFu
ZGxlcihpbnQgaXJxLCB2b2lkICpkYXRhKQo+ICAgCXJldHVybiBJUlFfSEFORExFRDsKPiAgIH0K
PiAgIAo+ICtzdGF0aWMgc3RydWN0IHVkbWFfcmZsb3cgKl9fdWRtYV9yZXNlcnZlX3JmbG93KHN0
cnVjdCB1ZG1hX2RldiAqdWQsCj4gKwkJCQkJICAgICAgIGVudW0gdWRtYV90cF9sZXZlbCB0cGws
IGludCBpZCkKPiArewo+ICsJREVDTEFSRV9CSVRNQVAodG1wLCBLM19VRE1BX01BWF9SRkxPV1Mp
Owo+ICsKPiArCWlmIChpZCA+PSAwKSB7Cj4gKwkJaWYgKHRlc3RfYml0KGlkLCB1ZC0+cmZsb3df
bWFwKSkgewo+ICsJCQlkZXZfZXJyKHVkLT5kZXYsICJyZmxvdyVkIGlzIGluIHVzZVxuIiwgaWQp
Owo+ICsJCQlyZXR1cm4gRVJSX1BUUigtRU5PRU5UKTsKPiArCQl9Cj4gKwl9IGVsc2Ugewo+ICsJ
CWJpdG1hcF9vcih0bXAsIHVkLT5yZmxvd19tYXAsIHVkLT5yZmxvd19tYXBfcmVzZXJ2ZWQsCj4g
KwkJCSAgdWQtPnJmbG93X2NudCk7Cj4gKwo+ICsJCWlkID0gZmluZF9uZXh0X3plcm9fYml0KHRt
cCwgdWQtPnJmbG93X2NudCwgdWQtPnJjaGFuX2NudCk7Cj4gKwkJaWYgKGlkID49IHVkLT5yZmxv
d19jbnQpCj4gKwkJCXJldHVybiBFUlJfUFRSKC1FTk9FTlQpOwo+ICsJfQo+ICsKPiArCXNldF9i
aXQoaWQsIHVkLT5yZmxvd19tYXApOwo+ICsJcmV0dXJuICZ1ZC0+cmZsb3dzW2lkXTsKPiArfQo+
ICsKPiArI2RlZmluZSBVRE1BX1JFU0VSVkVfUkVTT1VSQ0UocmVzKQkJCQkJXAo+ICtzdGF0aWMg
c3RydWN0IHVkbWFfIyNyZXMgKl9fdWRtYV9yZXNlcnZlXyMjcmVzKHN0cnVjdCB1ZG1hX2RldiAq
dWQsCVwKPiArCQkJCQkgICAgICAgZW51bSB1ZG1hX3RwX2xldmVsIHRwbCwJXAo+ICsJCQkJCSAg
ICAgICBpbnQgaWQpCQkJXAo+ICt7CQkJCQkJCQkJXAo+ICsJaWYgKGlkID49IDApIHsJCQkJCQkJ
XAo+ICsJCWlmICh0ZXN0X2JpdChpZCwgdWQtPnJlcyMjX21hcCkpIHsJCQlcCj4gKwkJCWRldl9l
cnIodWQtPmRldiwgInJlcyMjJWQgaXMgaW4gdXNlXG4iLCBpZCk7CVwKPiArCQkJcmV0dXJuIEVS
Ul9QVFIoLUVOT0VOVCk7CQkJXAo+ICsJCX0JCQkJCQkJXAo+ICsJfSBlbHNlIHsJCQkJCQkJXAo+
ICsJCWludCBzdGFydDsJCQkJCQlcCj4gKwkJCQkJCQkJCVwKPiArCQlpZiAodHBsID49IHVkLT5t
YXRjaF9kYXRhLT50cGxfbGV2ZWxzKQkJCVwKPiArCQkJdHBsID0gdWQtPm1hdGNoX2RhdGEtPnRw
bF9sZXZlbHMgLSAxOwkJXAo+ICsJCQkJCQkJCQlcCj4gKwkJc3RhcnQgPSB1ZC0+bWF0Y2hfZGF0
YS0+bGV2ZWxfc3RhcnRfaWR4W3RwbF07CQlcCj4gKwkJCQkJCQkJCVwKPiArCQlpZCA9IGZpbmRf
bmV4dF96ZXJvX2JpdCh1ZC0+cmVzIyNfbWFwLCB1ZC0+cmVzIyNfY250LAlcCj4gKwkJCQkJc3Rh
cnQpOwkJCQlcCj4gKwkJaWYgKGlkID09IHVkLT5yZXMjI19jbnQpIHsJCQkJXAo+ICsJCQlyZXR1
cm4gRVJSX1BUUigtRU5PRU5UKTsJCQlcCj4gKwkJfQkJCQkJCQlcCj4gKwl9CQkJCQkJCQlcCj4g
KwkJCQkJCQkJCVwKPiArCXNldF9iaXQoaWQsIHVkLT5yZXMjI19tYXApOwkJCQkJXAo+ICsJcmV0
dXJuICZ1ZC0+cmVzIyNzW2lkXTsJCQkJCQlcCj4gK30KPiArCj4gK1VETUFfUkVTRVJWRV9SRVNP
VVJDRSh0Y2hhbik7Cj4gK1VETUFfUkVTRVJWRV9SRVNPVVJDRShyY2hhbik7CgpQZXJzb25hbGx5
IEknbSBub3QgYSBmYW4gb2Ygc3VjaCBhIGJpZyBtYWNybywgd291bGRuJ3QgYmUgc3RhdGljIGZ1
bmN0aW9ucyBiZXR0ZXIuCiAgCgo+ICsKPiArc3RhdGljIGludCB1ZG1hX2dldF90Y2hhbihzdHJ1
Y3QgdWRtYV9jaGFuICp1YykKPiArewo+ICsJc3RydWN0IHVkbWFfZGV2ICp1ZCA9IHVjLT51ZDsK
PiArCj4gKwlpZiAodWMtPnRjaGFuKSB7Cj4gKwkJZGV2X2RiZyh1ZC0+ZGV2LCAiY2hhbiVkOiBh
bHJlYWR5IGhhdmUgdGNoYW4lZCBhbGxvY2F0ZWRcbiIsCj4gKwkJCXVjLT5pZCwgdWMtPnRjaGFu
LT5pZCk7Cj4gKwkJcmV0dXJuIDA7Cj4gKwl9Cj4gKwo+ICsJdWMtPnRjaGFuID0gX191ZG1hX3Jl
c2VydmVfdGNoYW4odWQsIHVjLT5jaGFubmVsX3RwbCwgLTEpOwo+ICsJaWYgKElTX0VSUih1Yy0+
dGNoYW4pKQo+ICsJCXJldHVybiBQVFJfRVJSKHVjLT50Y2hhbik7Cj4gKwo+ICsJcmV0dXJuIDA7
Cj4gK30KPiArCgpbLi4uXQoKPiArCj4gK3N0YXRpYyBpbnQgdWRtYV90aXNjaV9jaGFubmVsX2Nv
bmZpZyhzdHJ1Y3QgdWRtYV9jaGFuICp1YykKPiArewo+ICsJc3RydWN0IHVkbWFfZGV2ICp1ZCA9
IHVjLT51ZDsKPiArCXN0cnVjdCB1ZG1hX3Rpc2NpX3JtICp0aXNjaV9ybSA9ICZ1ZC0+dGlzY2lf
cm07Cj4gKwljb25zdCBzdHJ1Y3QgdGlfc2NpX3JtX3VkbWFwX29wcyAqdGlzY2lfb3BzID0gdGlz
Y2lfcm0tPnRpc2NpX3VkbWFwX29wczsKPiArCXN0cnVjdCB1ZG1hX3RjaGFuICp0Y2hhbiA9IHVj
LT50Y2hhbjsKPiArCXN0cnVjdCB1ZG1hX3JjaGFuICpyY2hhbiA9IHVjLT5yY2hhbjsKPiArCWlu
dCByZXQgPSAwOwo+ICsKPiArCWlmICh1Yy0+ZGlyID09IERNQV9NRU1fVE9fTUVNKSB7Cj4gKwkJ
LyogTm9uIHN5bmNocm9uaXplZCAtIG1lbSB0byBtZW0gdHlwZSBvZiB0cmFuc2ZlciAqLwo+ICsJ
CWludCB0Y19yaW5nID0gazNfcmluZ2FjY19nZXRfcmluZ19pZCh0Y2hhbi0+dGNfcmluZyk7Cj4g
KwkJc3RydWN0IHRpX3NjaV9tc2dfcm1fdWRtYXBfdHhfY2hfY2ZnIHJlcV90eCA9IHsgMCB9Owo+
ICsJCXN0cnVjdCB0aV9zY2lfbXNnX3JtX3VkbWFwX3J4X2NoX2NmZyByZXFfcnggPSB7IDAgfTsK
PiArCj4gKwkJcmVxX3R4LnZhbGlkX3BhcmFtcyA9Cj4gKwkJCVRJX1NDSV9NU0dfVkFMVUVfUk1f
VURNQVBfQ0hfUEFVU0VfT05fRVJSX1ZBTElEIHwKPiArCQkJVElfU0NJX01TR19WQUxVRV9STV9V
RE1BUF9DSF9UWF9GSUxUX0VJTkZPX1ZBTElEIHwKPiArCQkJVElfU0NJX01TR19WQUxVRV9STV9V
RE1BUF9DSF9UWF9GSUxUX1BTV09SRFNfVkFMSUQgfAo+ICsJCQlUSV9TQ0lfTVNHX1ZBTFVFX1JN
X1VETUFQX0NIX0NIQU5fVFlQRV9WQUxJRCB8Cj4gKwkJCVRJX1NDSV9NU0dfVkFMVUVfUk1fVURN
QVBfQ0hfVFhfU1VQUl9URFBLVF9WQUxJRCB8Cj4gKwkJCVRJX1NDSV9NU0dfVkFMVUVfUk1fVURN
QVBfQ0hfRkVUQ0hfU0laRV9WQUxJRCB8Cj4gKwkJCVRJX1NDSV9NU0dfVkFMVUVfUk1fVURNQVBf
Q0hfQ1FfUU5VTV9WQUxJRDsKPiArCj4gKwkJcmVxX3R4Lm5hdl9pZCA9IHRpc2NpX3JtLT50aXNj
aV9kZXZfaWQ7Cj4gKwkJcmVxX3R4LmluZGV4ID0gdGNoYW4tPmlkOwo+ICsJCXJlcV90eC50eF9w
YXVzZV9vbl9lcnIgPSAwOwo+ICsJCXJlcV90eC50eF9maWx0X2VpbmZvID0gMDsKPiArCQlyZXFf
dHgudHhfZmlsdF9wc3dvcmRzID0gMDsKPiArCQlyZXFfdHgudHhfY2hhbl90eXBlID0gVElfU0NJ
X1JNX1VETUFQX0NIQU5fVFlQRV8zUkRQX0JDT1BZX1BCUlI7Cj4gKwkJcmVxX3R4LnR4X3N1cHJf
dGRwa3QgPSAwOwo+ICsJCXJlcV90eC50eF9mZXRjaF9zaXplID0gc2l6ZW9mKHN0cnVjdCBjcHBp
NV9kZXNjX2hkcl90KSA+PiAyOwo+ICsJCXJlcV90eC50eGNxX3FudW0gPSB0Y19yaW5nOwo+ICsK
PiArCQlyZXQgPSB0aXNjaV9vcHMtPnR4X2NoX2NmZyh0aXNjaV9ybS0+dGlzY2ksICZyZXFfdHgp
Owo+ICsJCWlmIChyZXQpIHsKPiArCQkJZGV2X2Vycih1ZC0+ZGV2LCAidGNoYW4lZCBjZmcgZmFp
bGVkICVkXG4iLAo+ICsJCQkJdGNoYW4tPmlkLCByZXQpOwo+ICsJCQlyZXR1cm4gcmV0Owo+ICsJ
CX0KPiArCj4gKwkJcmVxX3J4LnZhbGlkX3BhcmFtcyA9Cj4gKwkJCVRJX1NDSV9NU0dfVkFMVUVf
Uk1fVURNQVBfQ0hfUEFVU0VfT05fRVJSX1ZBTElEIHwKPiArCQkJVElfU0NJX01TR19WQUxVRV9S
TV9VRE1BUF9DSF9GRVRDSF9TSVpFX1ZBTElEIHwKPiArCQkJVElfU0NJX01TR19WQUxVRV9STV9V
RE1BUF9DSF9DUV9RTlVNX1ZBTElEIHwKPiArCQkJVElfU0NJX01TR19WQUxVRV9STV9VRE1BUF9D
SF9DSEFOX1RZUEVfVkFMSUQgfAo+ICsJCQlUSV9TQ0lfTVNHX1ZBTFVFX1JNX1VETUFQX0NIX1JY
X0lHTk9SRV9TSE9SVF9WQUxJRCB8Cj4gKwkJCVRJX1NDSV9NU0dfVkFMVUVfUk1fVURNQVBfQ0hf
UlhfSUdOT1JFX0xPTkdfVkFMSUQ7Cj4gKwo+ICsJCXJlcV9yeC5uYXZfaWQgPSB0aXNjaV9ybS0+
dGlzY2lfZGV2X2lkOwo+ICsJCXJlcV9yeC5pbmRleCA9IHJjaGFuLT5pZDsKPiArCQlyZXFfcngu
cnhfZmV0Y2hfc2l6ZSA9IHNpemVvZihzdHJ1Y3QgY3BwaTVfZGVzY19oZHJfdCkgPj4gMjsKPiAr
CQlyZXFfcngucnhjcV9xbnVtID0gdGNfcmluZzsKPiArCQlyZXFfcngucnhfcGF1c2Vfb25fZXJy
ID0gMDsKPiArCQlyZXFfcngucnhfY2hhbl90eXBlID0gVElfU0NJX1JNX1VETUFQX0NIQU5fVFlQ
RV8zUkRQX0JDT1BZX1BCUlI7Cj4gKwkJcmVxX3J4LnJ4X2lnbm9yZV9zaG9ydCA9IDA7Cj4gKwkJ
cmVxX3J4LnJ4X2lnbm9yZV9sb25nID0gMDtQZXJzb25hbGx5IEknbSBub3QgYSBmYW4gb2Ygc3Vj
aCBhIGJpZyBtYWNyby4KPiArCj4gKwkJcmV0ID0gdGlzY2lfb3BzLT5yeF9jaF9jZmcodGlzY2lf
cm0tPnRpc2NpLCAmcmVxX3J4KTsKPiArCQlpZiAocmV0KSB7Cj4gKwkJCWRldl9lcnIodWQtPmRl
diwgInJjaGFuJWQgYWxsb2MgZmFpbGVkICVkXG4iLAo+ICsJCQkJcmNoYW4tPmlkLCByZXQpOwo+
ICsJCQlyZXR1cm4gcmV0Owo+ICsJCX0KPiArCX0gZWxzZSB7Cj4gKwkJLyogU2xhdmUgdHJhbnNm
ZXIgKi8KPiArCQl1MzIgbW9kZSwgZmV0Y2hfc2l6ZTsKPiArCj4gKwkJaWYgKHVjLT5wa3RfbW9k
ZSkgewo+ICsJCQltb2RlID0gVElfU0NJX1JNX1VETUFQX0NIQU5fVFlQRV9QS1RfUEJSUjsKPiAr
CQkJZmV0Y2hfc2l6ZSA9IGNwcGk1X2hkZXNjX2NhbGNfc2l6ZSh1Yy0+bmVlZHNfZXBpYiwKPiAr
CQkJCQkJCSAgIHVjLT5wc2Rfc2l6ZSwgMCk7Cj4gKwkJfSBlbHNlIHsKPiArCQkJbW9kZSA9IFRJ
X1NDSV9STV9VRE1BUF9DSEFOX1RZUEVfM1JEUF9QQlJSOwo+ICsJCQlmZXRjaF9zaXplID0gc2l6
ZW9mKHN0cnVjdCBjcHBpNV9kZXNjX2hkcl90KTsKPiArCQl9Cj4gKwo+ICsJCWlmICh1Yy0+ZGly
ID09IERNQV9NRU1fVE9fREVWKSB7Cj4gKwkJCS8qIFRYICovCj4gKwkJCWludCB0Y19yaW5nID0g
azNfcmluZ2FjY19nZXRfcmluZ19pZCh0Y2hhbi0+dGNfcmluZyk7Cj4gKwkJCXN0cnVjdCB0aV9z
Y2lfbXNnX3JtX3VkbWFwX3R4X2NoX2NmZyByZXFfdHggPSB7IDAgfTsKPiArCj4gKwkJCXJlcV90
eC52YWxpZF9wYXJhbXMgPQo+ICsJCQlUSV9TQ0lfTVNHX1ZBTFVFX1JNX1VETUFQX0NIX1BBVVNF
X09OX0VSUl9WQUxJRCB8Cj4gKwkJCVRJX1NDSV9NU0dfVkFMVUVfUk1fVURNQVBfQ0hfVFhfRklM
VF9FSU5GT19WQUxJRCB8Cj4gKwkJCVRJX1NDSV9NU0dfVkFMVUVfUk1fVURNQVBfQ0hfVFhfRklM
VF9QU1dPUkRTX1ZBTElEIHwKPiArCQkJVElfU0NJX01TR19WQUxVRV9STV9VRE1BUF9DSF9DSEFO
X1RZUEVfVkFMSUQgfAo+ICsJCQlUSV9TQ0lfTVNHX1ZBTFVFX1JNX1VETUFQX0NIX1RYX1NVUFJf
VERQS1RfVkFMSUQgfAo+ICsJCQlUSV9TQ0lfTVNHX1ZBTFVFX1JNX1VETUFQX0NIX0ZFVENIX1NJ
WkVfVkFMSUQgfAo+ICsJCQlUSV9TQ0lfTVNHX1ZBTFVFX1JNX1VETUFQX0NIX0NRX1FOVU1fVkFM
SUQ7Cj4gKwo+ICsJCQlyZXFfdHgubmF2X2lkID0gdGlzY2lfcm0tPnRpc2NpX2Rldl9pZDsKPiAr
CQkJcmVxX3R4LmluZGV4ID0gdGNoYW4tPmlkOwo+ICsJCQlyZXFfdHgudHhfcGF1c2Vfb25fZXJy
ID0gMDsKPiArCQkJcmVxX3R4LnR4X2ZpbHRfZWluZm8gPSAwOwo+ICsJCQlyZXFfdHgudHhfZmls
dF9wc3dvcmRzID0gMDsKPiArCQkJcmVxX3R4LnR4X2NoYW5fdHlwZSA9IG1vZGU7Cj4gKwkJCXJl
cV90eC50eF9zdXByX3RkcGt0ID0gMDsKPiArCQkJcmVxX3R4LnR4X2ZldGNoX3NpemUgPSBmZXRj
aF9zaXplID4+IDI7Cj4gKwkJCXJlcV90eC50eGNxX3FudW0gPSB0Y19yaW5nOwo+ICsKPiArCQkJ
cmV0ID0gdGlzY2lfb3BzLT50eF9jaF9jZmcodGlzY2lfcm0tPnRpc2NpLCAmcmVxX3R4KTsKPiAr
CQkJaWYgKHJldCkgewo+ICsJCQkJZGV2X2Vycih1ZC0+ZGV2LCAidGNoYW4lZCBjZmcgZmFpbGVk
ICVkXG4iLAo+ICsJCQkJCXRjaGFuLT5pZCwgcmV0KTsKPiArCQkJCXJldHVybiByZXQ7Cj4gKwkJ
CX0KPiArCQl9IGVsc2Ugewo+ICsJCQkvKiBSWCAqLwo+ICsJCQlpbnQgZmRfcmluZyA9IGszX3Jp
bmdhY2NfZ2V0X3JpbmdfaWQocmNoYW4tPmZkX3JpbmcpOwo+ICsJCQlpbnQgcnhfcmluZyA9IGsz
X3JpbmdhY2NfZ2V0X3JpbmdfaWQocmNoYW4tPnJfcmluZyk7Cj4gKwkJCXN0cnVjdCB0aV9zY2lf
bXNnX3JtX3VkbWFwX3J4X2NoX2NmZyByZXFfcnggPSB7IDAgfTsKPiArCQkJc3RydWN0IHRpX3Nj
aV9tc2dfcm1fdWRtYXBfZmxvd19jZmcgZmxvd19yZXEgPSB7IDAgfTsKPiArCj4gKwkJCXJlcV9y
eC52YWxpZF9wYXJhbXMgPQo+ICsJCQlUSV9TQ0lfTVNHX1ZBTFVFX1JNX1VETUFQX0NIX1BBVVNF
X09OX0VSUl9WQUxJRCB8Cj4gKwkJCVRJX1NDSV9NU0dfVkFMVUVfUk1fVURNQVBfQ0hfRkVUQ0hf
U0laRV9WQUxJRCB8Cj4gKwkJCVRJX1NDSV9NU0dfVkFMVUVfUk1fVURNQVBfQ0hfQ1FfUU5VTV9W
QUxJRCB8Cj4gKwkJCVRJX1NDSV9NU0dfVkFMVUVfUk1fVURNQVBfQ0hfQ0hBTl9UWVBFX1ZBTElE
IHwKPiArCQkJVElfU0NJX01TR19WQUxVRV9STV9VRE1BUF9DSF9SWF9JR05PUkVfU0hPUlRfVkFM
SUQgfAo+ICsJCQlUSV9TQ0lfTVNHX1ZBTFVFX1JNX1VETUFQX0NIX1JYX0lHTk9SRV9MT05HX1ZB
TElEOwo+ICsKPiArCQkJcmVxX3J4Lm5hdl9pZCA9IHRpc2NpX3JtLT50aXNjaV9kZXZfaWQ7Cj4g
KwkJCXJlcV9yeC5pbmRleCA9IHJjaGFuLT5pZDsKPiArCQkJcmVxX3J4LnJ4X2ZldGNoX3NpemUg
PSAgZmV0Y2hfc2l6ZSA+PiAyOwo+ICsJCQlyZXFfcngucnhjcV9xbnVtID0gcnhfcmluZzsKPiAr
CQkJcmVxX3J4LnJ4X3BhdXNlX29uX2VyciA9IDA7Cj4gKwkJCXJlcV9yeC5yeF9jaGFuX3R5cGUg
PSBtb2RlOwo+ICsJCQlyZXFfcngucnhfaWdub3JlX3Nob3J0ID0gMDsKPiArCQkJcmVxX3J4LnJ4
X2lnbm9yZV9sb25nID0gMDsKPiArCj4gKwkJCXJldCA9IHRpc2NpX29wcy0+cnhfY2hfY2ZnKHRp
c2NpX3JtLT50aXNjaSwgJnJlcV9yeCk7Cj4gKwkJCWlmIChyZXQpIHsKPiArCQkJCWRldl9lcnIo
dWQtPmRldiwgInJjaGFuJWQgY2ZnIGZhaWxlZCAlZFxuIiwKPiArCQkJCQlyY2hhbi0+aWQsIHJl
dCk7Cj4gKwkJCQlyZXR1cm4gcmV0Owo+ICsJCQl9Cj4gKwo+ICsJCQlmbG93X3JlcS52YWxpZF9w
YXJhbXMgPQo+ICsJCQlUSV9TQ0lfTVNHX1ZBTFVFX1JNX1VETUFQX0ZMT1dfRUlORk9fUFJFU0VO
VF9WQUxJRCB8Cj4gKwkJCVRJX1NDSV9NU0dfVkFMVUVfUk1fVURNQVBfRkxPV19QU0lORk9fUFJF
U0VOVF9WQUxJRCB8Cj4gKwkJCVRJX1NDSV9NU0dfVkFMVUVfUk1fVURNQVBfRkxPV19FUlJPUl9I
QU5ETElOR19WQUxJRCB8Cj4gKwkJCVRJX1NDSV9NU0dfVkFMVUVfUk1fVURNQVBfRkxPV19ERVND
X1RZUEVfVkFMSUQgfAo+ICsJCQlUSV9TQ0lfTVNHX1ZBTFVFX1JNX1VETUFQX0ZMT1dfREVTVF9R
TlVNX1ZBTElEIHwKPiArCQkJVElfU0NJX01TR19WQUxVRV9STV9VRE1BUF9GTE9XX1NSQ19UQUdf
SElfU0VMX1ZBTElEIHwKPiArCQkJVElfU0NJX01TR19WQUxVRV9STV9VRE1BUF9GTE9XX1NSQ19U
QUdfTE9fU0VMX1ZBTElEIHwKPiArCQkJVElfU0NJX01TR19WQUxVRV9STV9VRE1BUF9GTE9XX0RF
U1RfVEFHX0hJX1NFTF9WQUxJRCB8Cj4gKwkJCVRJX1NDSV9NU0dfVkFMVUVfUk1fVURNQVBfRkxP
V19ERVNUX1RBR19MT19TRUxfVkFMSUQgfAo+ICsJCQlUSV9TQ0lfTVNHX1ZBTFVFX1JNX1VETUFQ
X0ZMT1dfRkRRMF9TWjBfUU5VTV9WQUxJRCB8Cj4gKwkJCVRJX1NDSV9NU0dfVkFMVUVfUk1fVURN
QVBfRkxPV19GRFExX1FOVU1fVkFMSUQgfAo+ICsJCQlUSV9TQ0lfTVNHX1ZBTFVFX1JNX1VETUFQ
X0ZMT1dfRkRRMl9RTlVNX1ZBTElEIHwKPiArCQkJVElfU0NJX01TR19WQUxVRV9STV9VRE1BUF9G
TE9XX0ZEUTNfUU5VTV9WQUxJRDsKPiArCj4gKwkJCWZsb3dfcmVxLm5hdl9pZCA9IHRpc2NpX3Jt
LT50aXNjaV9kZXZfaWQ7Cj4gKwkJCWZsb3dfcmVxLmZsb3dfaW5kZXggPSByY2hhbi0+aWQ7Cj4g
Kwo+ICsJCQlpZiAodWMtPm5lZWRzX2VwaWIpCj4gKwkJCQlmbG93X3JlcS5yeF9laW5mb19wcmVz
ZW50ID0gMTsKPiArCQkJZWxzZQo+ICsJCQkJZmxvd19yZXEucnhfZWluZm9fcHJlc2VudCA9IDA7
Cj4gKwkJCWlmICh1Yy0+cHNkX3NpemUpCj4gKwkJCQlmbG93X3JlcS5yeF9wc2luZm9fcHJlc2Vu
dCA9IDE7Cj4gKwkJCWVsc2UKPiArCQkJCWZsb3dfcmVxLnJ4X3BzaW5mb19wcmVzZW50ID0gMDsK
PiArCQkJZmxvd19yZXEucnhfZXJyb3JfaGFuZGxpbmcgPSAxOwo+ICsJCQlmbG93X3JlcS5yeF9k
ZXNjX3R5cGUgPSAwOwo+ICsJCQlmbG93X3JlcS5yeF9kZXN0X3FudW0gPSByeF9yaW5nOwo+ICsJ
CQlmbG93X3JlcS5yeF9zcmNfdGFnX2hpX3NlbCA9IDI7Cj4gKwkJCWZsb3dfcmVxLnJ4X3NyY190
YWdfbG9fc2VsID0gNDsKPiArCQkJZmxvd19yZXEucnhfZGVzdF90YWdfaGlfc2VsID0gNTsKPiAr
CQkJZmxvd19yZXEucnhfZGVzdF90YWdfbG9fc2VsID0gNDsKPiArCQkJZmxvd19yZXEucnhfZmRx
MF9zejBfcW51bSA9IGZkX3Jpbmc7Cj4gKwkJCWZsb3dfcmVxLnJ4X2ZkcTFfcW51bSA9IGZkX3Jp
bmc7Cj4gKwkJCWZsb3dfcmVxLnJ4X2ZkcTJfcW51bSA9IGZkX3Jpbmc7Cj4gKwkJCWZsb3dfcmVx
LnJ4X2ZkcTNfcW51bSA9IGZkX3Jpbmc7Cj4gKwo+ICsJCQlyZXQgPSB0aXNjaV9vcHMtPnJ4X2Zs
b3dfY2ZnKHRpc2NpX3JtLT50aXNjaSwKPiArCQkJCQkJICAgICAmZmxvd19yZXEpOwo+ICsKPiAr
CQkJaWYgKHJldCkgewo+ICsJCQkJZGV2X2Vycih1ZC0+ZGV2LCAiZmxvdyVkIGNvbmZpZyBmYWls
ZWQ6ICVkXG4iLAo+ICsJCQkJCXJjaGFuLT5pZCwgcmV0KTsKPiArCQkJCXJldHVybiByZXQ7Cj4g
KwkJCX0KPiArCQl9Cj4gKwl9Cj4gKwo+ICsJcmV0dXJuIDA7Cj4gK30KCkNvdWxkIHlvdSBzcGxp
dCBhYm92ZSBiaWcgZnVuY3Rpb24gcGxzPwoKPiArCj4gK3N0YXRpYyBpbnQgdWRtYV9hbGxvY19j
aGFuX3Jlc291cmNlcyhzdHJ1Y3QgZG1hX2NoYW4gKmNoYW4pCj4gK3sKPiArCXN0cnVjdCB1ZG1h
X2NoYW4gKnVjID0gdG9fdWRtYV9jaGFuKGNoYW4pOwo+ICsJc3RydWN0IHVkbWFfZGV2ICp1ZCA9
IHRvX3VkbWFfZGV2KGNoYW4tPmRldmljZSk7Cj4gKwljb25zdCBzdHJ1Y3QgdWRtYV9tYXRjaF9k
YXRhICptYXRjaF9kYXRhID0gdWQtPm1hdGNoX2RhdGE7Cj4gKwlzdHJ1Y3QgazNfcmluZyAqaXJx
X3Jpbmc7Cj4gKwl1MzIgaXJxX3VkbWFfaWR4Owo+ICsJaW50IHJldDsKPiArCj4gKwlpZiAodWMt
PnBrdF9tb2RlIHx8IHVjLT5kaXIgPT0gRE1BX01FTV9UT19NRU0pIHsKPiArCQl1Yy0+dXNlX2Rt
YV9wb29sID0gdHJ1ZTsKPiArCQkvKiBpbiBjYXNlIG9mIE1FTV9UT19NRU0gd2UgaGF2ZSBtYXhp
bXVtIG9mIHR3byBUUnMgKi8KPiArCQlpZiAodWMtPmRpciA9PSBETUFfTUVNX1RPX01FTSkgewo+
ICsJCQl1Yy0+aGRlc2Nfc2l6ZSA9IGNwcGk1X3RyZGVzY19jYWxjX3NpemUoCj4gKwkJCQkJc2l6
ZW9mKHN0cnVjdCBjcHBpNV90cl90eXBlMTVfdCksIDIpOwo+ICsJCQl1Yy0+cGt0X21vZGUgPSBm
YWxzZTsKPiArCQl9Cj4gKwl9Cj4gKwo+ICsJaWYgKHVjLT51c2VfZG1hX3Bvb2wpIHsKPiArCQl1
Yy0+aGRlc2NfcG9vbCA9IGRtYV9wb29sX2NyZWF0ZSh1Yy0+bmFtZSwgdWQtPmRkZXYuZGV2LAo+
ICsJCQkJCQkgdWMtPmhkZXNjX3NpemUsIHVkLT5kZXNjX2FsaWduLAo+ICsJCQkJCQkgMCk7Cj4g
KwkJaWYgKCF1Yy0+aGRlc2NfcG9vbCkgewo+ICsJCQlkZXZfZXJyKHVkLT5kZGV2LmRldiwKPiAr
CQkJCSJEZXNjcmlwdG9yIHBvb2wgYWxsb2NhdGlvbiBmYWlsZWRcbiIpOwo+ICsJCQl1Yy0+dXNl
X2RtYV9wb29sID0gZmFsc2U7Cj4gKwkJCXJldHVybiAtRU5PTUVNOwo+ICsJCX0KPiArCX0KPiAr
Cj4gKwlwbV9ydW50aW1lX2dldF9zeW5jKHVkLT5kZGV2LmRldik7Cj4gKwo+ICsJLyoKPiArCSAq
IE1ha2Ugc3VyZSB0aGF0IHRoZSBjb21wbGV0aW9uIGlzIGluIGEga25vd24gc3RhdGU6Cj4gKwkg
KiBObyB0ZWFyZG93biwgdGhlIGNoYW5uZWwgaXMgaWRsZQo+ICsJICovCj4gKwlyZWluaXRfY29t
cGxldGlvbigmdWMtPnRlYXJkb3duX2NvbXBsZXRlZCk7Cj4gKwljb21wbGV0ZV9hbGwoJnVjLT50
ZWFyZG93bl9jb21wbGV0ZWQpOwo+ICsJdWMtPnN0YXRlID0gVURNQV9DSEFOX0lTX0lETEU7Cj4g
Kwo+ICsJc3dpdGNoICh1Yy0+ZGlyKSB7Cj4gKwljYXNlIERNQV9NRU1fVE9fTUVNOgo+ICsJCS8q
IE5vbiBzeW5jaHJvbml6ZWQgLSBtZW0gdG8gbWVtIHR5cGUgb2YgdHJhbnNmZXIgKi8KPiArCQlk
ZXZfZGJnKHVjLT51ZC0+ZGV2LCAiJXM6IGNoYW4lZCBhcyBNRU0tdG8tTUVNXG4iLCBfX2Z1bmNf
XywKPiArCQkJdWMtPmlkKTsKPiArCj4gKwkJcmV0ID0gdWRtYV9nZXRfY2hhbl9wYWlyKHVjKTsK
PiArCQlpZiAocmV0KQo+ICsJCQlyZXR1cm4gcmV0Owo+ICsKPiArCQlyZXQgPSB1ZG1hX2FsbG9j
X3R4X3Jlc291cmNlcyh1Yyk7Cj4gKwkJaWYgKHJldCkKPiArCQkJcmV0dXJuIHJldDsKPiArCj4g
KwkJcmV0ID0gdWRtYV9hbGxvY19yeF9yZXNvdXJjZXModWMpOwo+ICsJCWlmIChyZXQpIHsKPiAr
CQkJdWRtYV9mcmVlX3R4X3Jlc291cmNlcyh1Yyk7Cj4gKwkJCXJldHVybiByZXQ7Cj4gKwkJfQo+
ICsKPiArCQl1Yy0+c3JjX3RocmVhZCA9IHVkLT5wc2lsX2Jhc2UgKyB1Yy0+dGNoYW4tPmlkOwo+
ICsJCXVjLT5kc3RfdGhyZWFkID0gKHVkLT5wc2lsX2Jhc2UgKyB1Yy0+cmNoYW4tPmlkKSB8Cj4g
KwkJCQkgVURNQV9QU0lMX0RTVF9USFJFQURfSURfT0ZGU0VUOwo+ICsKPiArCQlpcnFfcmluZyA9
IHVjLT50Y2hhbi0+dGNfcmluZzsKPiArCQlpcnFfdWRtYV9pZHggPSB1Yy0+dGNoYW4tPmlkOwo+
ICsJCWJyZWFrOwo+ICsJY2FzZSBETUFfTUVNX1RPX0RFVjoKPiArCQkvKiBTbGF2ZSB0cmFuc2Zl
ciBzeW5jaHJvbml6ZWQgLSBtZW0gdG8gZGV2IChUWCkgdHJhc25mZXIgKi8KPiArCQlkZXZfZGJn
KHVjLT51ZC0+ZGV2LCAiJXM6IGNoYW4lZCBhcyBNRU0tdG8tREVWXG4iLCBfX2Z1bmNfXywKPiAr
CQkJdWMtPmlkKTsKPiArCj4gKwkJcmV0ID0gdWRtYV9hbGxvY190eF9yZXNvdXJjZXModWMpOwo+
ICsJCWlmIChyZXQpIHsKPiArCQkJdWMtPnJlbW90ZV90aHJlYWRfaWQgPSAtMTsKPiArCQkJcmV0
dXJuIHJldDsKPiArCQl9Cj4gKwo+ICsJCXVjLT5zcmNfdGhyZWFkID0gdWQtPnBzaWxfYmFzZSAr
IHVjLT50Y2hhbi0+aWQ7Cj4gKwkJdWMtPmRzdF90aHJlYWQgPSB1Yy0+cmVtb3RlX3RocmVhZF9p
ZDsKPiArCQl1Yy0+ZHN0X3RocmVhZCB8PSBVRE1BX1BTSUxfRFNUX1RIUkVBRF9JRF9PRkZTRVQ7
Cj4gKwo+ICsJCWlycV9yaW5nID0gdWMtPnRjaGFuLT50Y19yaW5nOwo+ICsJCWlycV91ZG1hX2lk
eCA9IHVjLT50Y2hhbi0+aWQ7Cj4gKwkJYnJlYWs7Cj4gKwljYXNlIERNQV9ERVZfVE9fTUVNOgo+
ICsJCS8qIFNsYXZlIHRyYW5zZmVyIHN5bmNocm9uaXplZCAtIGRldiB0byBtZW0gKFJYKSB0cmFz
bmZlciAqLwo+ICsJCWRldl9kYmcodWMtPnVkLT5kZXYsICIlczogY2hhbiVkIGFzIERFVi10by1N
RU1cbiIsIF9fZnVuY19fLAo+ICsJCQl1Yy0+aWQpOwo+ICsKPiArCQlyZXQgPSB1ZG1hX2FsbG9j
X3J4X3Jlc291cmNlcyh1Yyk7Cj4gKwkJaWYgKHJldCkgewo+ICsJCQl1Yy0+cmVtb3RlX3RocmVh
ZF9pZCA9IC0xOwo+ICsJCQlyZXR1cm4gcmV0Owo+ICsJCX0KPiArCj4gKwkJdWMtPnNyY190aHJl
YWQgPSB1Yy0+cmVtb3RlX3RocmVhZF9pZDsKPiArCQl1Yy0+ZHN0X3RocmVhZCA9ICh1ZC0+cHNp
bF9iYXNlICsgdWMtPnJjaGFuLT5pZCkgfAo+ICsJCQkJIFVETUFfUFNJTF9EU1RfVEhSRUFEX0lE
X09GRlNFVDsKPiArCj4gKwkJaXJxX3JpbmcgPSB1Yy0+cmNoYW4tPnJfcmluZzsKPiArCQlpcnFf
dWRtYV9pZHggPSBtYXRjaF9kYXRhLT5yY2hhbl9vZXNfb2Zmc2V0ICsgdWMtPnJjaGFuLT5pZDsK
PiArCQlicmVhazsKPiArCWRlZmF1bHQ6Cj4gKwkJLyogQ2FuIG5vdCBoYXBwZW4gKi8KPiArCQlk
ZXZfZXJyKHVjLT51ZC0+ZGV2LCAiJXM6IGNoYW4lZCBpbnZhbGlkIGRpcmVjdGlvbiAoJXUpXG4i
LAo+ICsJCQlfX2Z1bmNfXywgdWMtPmlkLCB1Yy0+ZGlyKTsKPiArCQlyZXR1cm4gLUVJTlZBTDsK
PiArCX0KPiArCj4gKwkvKiBDb25maWd1cmUgY2hhbm5lbChzKSwgcmZsb3cgdmlhIHRpc2NpICov
Cj4gKwlyZXQgPSB1ZG1hX3Rpc2NpX2NoYW5uZWxfY29uZmlnKHVjKTsKPiArCWlmIChyZXQpCj4g
KwkJZ290byBlcnJfcmVzX2ZyZWU7Cj4gKwo+ICsJaWYgKHVkbWFfaXNfY2hhbl9ydW5uaW5nKHVj
KSkgewo+ICsJCWRldl93YXJuKHVkLT5kZXYsICJjaGFuJWQ6IGlzIHJ1bm5pbmchXG4iLCB1Yy0+
aWQpOwo+ICsJCXVkbWFfc3RvcCh1Yyk7Cj4gKwkJaWYgKHVkbWFfaXNfY2hhbl9ydW5uaW5nKHVj
KSkgewo+ICsJCQlkZXZfZXJyKHVkLT5kZXYsICJjaGFuJWQ6IHdvbid0IHN0b3AhXG4iLCB1Yy0+
aWQpOwo+ICsJCQlnb3RvIGVycl9yZXNfZnJlZTsKPiArCQl9Cj4gKwl9Cj4gKwo+ICsJLyogUFNJ
LUwgcGFpcmluZyAqLwo+ICsJcmV0ID0gbmF2c3NfcHNpbF9wYWlyKHVkLCB1Yy0+c3JjX3RocmVh
ZCwgdWMtPmRzdF90aHJlYWQpOwo+ICsJaWYgKHJldCkgewo+ICsJCWRldl9lcnIodWQtPmRldiwg
IlBTSS1MIHBhaXJpbmcgZmFpbGVkOiAweCUwNHggLT4gMHglMDR4XG4iLAo+ICsJCQl1Yy0+c3Jj
X3RocmVhZCwgdWMtPmRzdF90aHJlYWQpOwo+ICsJCWdvdG8gZXJyX3Jlc19mcmVlOwo+ICsJfQo+
ICsKPiArCXVjLT5wc2lsX3BhaXJlZCA9IHRydWU7Cj4gKwo+ICsJdWMtPmlycV9udW1fcmluZyA9
IGszX3JpbmdhY2NfZ2V0X3JpbmdfaXJxX251bShpcnFfcmluZyk7Cj4gKwlpZiAodWMtPmlycV9u
dW1fcmluZyA8PSAwKSB7Cj4gKwkJZGV2X2Vycih1ZC0+ZGV2LCAiRmFpbGVkIHRvIGdldCByaW5n
IGlycSAoaW5kZXg6ICV1KVxuIiwKPiArCQkJazNfcmluZ2FjY19nZXRfcmluZ19pZChpcnFfcmlu
ZykpOwo+ICsJCXJldCA9IC1FSU5WQUw7Cj4gKwkJZ290byBlcnJfcHNpX2ZyZWU7Cj4gKwl9Cj4g
Kwo+ICsJcmV0ID0gcmVxdWVzdF9pcnEodWMtPmlycV9udW1fcmluZywgdWRtYV9yaW5nX2lycV9o
YW5kbGVyLAo+ICsJCQkgIElSUUZfVFJJR0dFUl9ISUdILCB1Yy0+bmFtZSwgdWMpOwo+ICsJaWYg
KHJldCkgewo+ICsJCWRldl9lcnIodWQtPmRldiwgImNoYW4lZDogcmluZyBpcnEgcmVxdWVzdCBm
YWlsZWRcbiIsIHVjLT5pZCk7Cj4gKwkJZ290byBlcnJfaXJxX2ZyZWU7Cj4gKwl9Cj4gKwo+ICsJ
LyogRXZlbnQgZnJvbSBVRE1BIChUUiBldmVudHMpIG9ubHkgbmVlZGVkIGZvciBzbGF2ZSBUUiBt
b2RlIGNoYW5uZWxzICovCj4gKwlpZiAoaXNfc2xhdmVfZGlyZWN0aW9uKHVjLT5kaXIpICYmICF1
Yy0+cGt0X21vZGUpIHsKPiArCQl1Yy0+aXJxX251bV91ZG1hID0gdGlfc2NpX2ludGFfbXNpX2dl
dF92aXJxKHVkLT5kZXYsCj4gKwkJCQkJCQkgICAgaXJxX3VkbWFfaWR4KTsKPiArCQlpZiAodWMt
PmlycV9udW1fdWRtYSA8PSAwKSB7Cj4gKwkJCWRldl9lcnIodWQtPmRldiwgIkZhaWxlZCB0byBn
ZXQgdWRtYSBpcnEgKGluZGV4OiAldSlcbiIsCj4gKwkJCQlpcnFfdWRtYV9pZHgpOwo+ICsJCQlm
cmVlX2lycSh1Yy0+aXJxX251bV9yaW5nLCB1Yyk7Cj4gKwkJCXJldCA9IC1FSU5WQUw7Cj4gKwkJ
CWdvdG8gZXJyX2lycV9mcmVlOwo+ICsJCX0KPiArCj4gKwkJcmV0ID0gcmVxdWVzdF9pcnEodWMt
PmlycV9udW1fdWRtYSwgdWRtYV91ZG1hX2lycV9oYW5kbGVyLCAwLAo+ICsJCQkJICB1Yy0+bmFt
ZSwgdWMpOwo+ICsJCWlmIChyZXQpIHsKPiArCQkJZGV2X2Vycih1ZC0+ZGV2LCAiY2hhbiVkOiBV
RE1BIGlycSByZXF1ZXN0IGZhaWxlZFxuIiwKPiArCQkJCXVjLT5pZCk7Cj4gKwkJCWZyZWVfaXJx
KHVjLT5pcnFfbnVtX3JpbmcsIHVjKTsKPiArCQkJZ290byBlcnJfaXJxX2ZyZWU7Cj4gKwkJfQo+
ICsJfSBlbHNlIHsKPiArCQl1Yy0+aXJxX251bV91ZG1hID0gMDsKPiArCX0KPiArCj4gKwl1ZG1h
X3Jlc2V0X3JpbmdzKHVjKTsKPiArCj4gKwlyZXR1cm4gMDsKPiArCj4gK2Vycl9pcnFfZnJlZToK
PiArCXVjLT5pcnFfbnVtX3JpbmcgPSAwOwo+ICsJdWMtPmlycV9udW1fdWRtYSA9IDA7Cj4gK2Vy
cl9wc2lfZnJlZToKPiArCW5hdnNzX3BzaWxfdW5wYWlyKHVkLCB1Yy0+c3JjX3RocmVhZCwgdWMt
PmRzdF90aHJlYWQpOwo+ICsJdWMtPnBzaWxfcGFpcmVkID0gZmFsc2U7Cj4gK2Vycl9yZXNfZnJl
ZToKPiArCXVkbWFfZnJlZV90eF9yZXNvdXJjZXModWMpOwo+ICsJdWRtYV9mcmVlX3J4X3Jlc291
cmNlcyh1Yyk7Cj4gKwo+ICsJdWMtPnJlbW90ZV90aHJlYWRfaWQgPSAtMTsKPiArCXVjLT5kaXIg
PSBETUFfTUVNX1RPX01FTTsKPiArCXVjLT5wa3RfbW9kZSA9IGZhbHNlOwo+ICsJdWMtPnN0YXRp
Y190cl90eXBlID0gMDsKPiArCXVjLT5lbmFibGVfYWNjMzIgPSAwOwo+ICsJdWMtPmVuYWJsZV9i
dXJzdCA9IDA7Cj4gKwl1Yy0+Y2hhbm5lbF90cGwgPSAwOwo+ICsJdWMtPnBzZF9zaXplID0gMDsK
PiArCXVjLT5tZXRhZGF0YV9zaXplID0gMDsKPiArCXVjLT5oZGVzY19zaXplID0gMDsKPiArCj4g
KwlpZiAodWMtPnVzZV9kbWFfcG9vbCkgewo+ICsJCWRtYV9wb29sX2Rlc3Ryb3kodWMtPmhkZXNj
X3Bvb2wpOwo+ICsJCXVjLT51c2VfZG1hX3Bvb2wgPSBmYWxzZTsKPiArCX0KPiArCj4gKwlyZXR1
cm4gcmV0Owo+ICt9Cj4gKwoKWy4uLl0KCi0tIApCZXN0IHJlZ2FyZHMsCmdyeWdvcmlpCgpfX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpsaW51eC1hcm0ta2Vy
bmVsIG1haWxpbmcgbGlzdApsaW51eC1hcm0ta2VybmVsQGxpc3RzLmluZnJhZGVhZC5vcmcKaHR0
cDovL2xpc3RzLmluZnJhZGVhZC5vcmcvbWFpbG1hbi9saXN0aW5mby9saW51eC1hcm0ta2VybmVs
Cg==
