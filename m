Return-Path: <linux-arm-kernel-bounces+lists+linux-arm-kernel=lfdr.de@lists.infradead.org>
X-Original-To: lists+linux-arm-kernel@lfdr.de
Delivered-To: lists+linux-arm-kernel@lfdr.de
Received: from bombadil.infradead.org (bombadil.infradead.org [IPv6:2607:7c80:54:e::133])
	by mail.lfdr.de (Postfix) with ESMTPS id A27C110C7A9
	for <lists+linux-arm-kernel@lfdr.de>; Thu, 28 Nov 2019 12:03:22 +0100 (CET)
DKIM-Signature: v=1; a=rsa-sha256; q=dns/txt; c=relaxed/relaxed;
	d=lists.infradead.org; s=bombadil.20170209; h=Sender:
	Content-Transfer-Encoding:Content-Type:Cc:List-Subscribe:List-Help:List-Post:
	List-Archive:List-Unsubscribe:List-Id:MIME-Version:References:In-Reply-To:
	Message-ID:Date:Subject:To:From:Reply-To:Content-ID:Content-Description:
	Resent-Date:Resent-From:Resent-Sender:Resent-To:Resent-Cc:Resent-Message-ID:
	List-Owner; bh=wrGfzVxWY7tcpKZXQVCwYL2ohQ2YX7a1DdA7FngPIJc=; b=hn0yvMwTQ3ww2t
	3uI+YSxAI8LmsNJPgscTAiLp4vQuVJdfKoCVFEuCq4/gl77AFTYJ0daviA/rcFSrVzqbvsg6Qk5wG
	wHTv3dVH32Sd1H9NQ1uCmop88DIFeUah98Pfulw9cf8YPYKpGNN1U57ms5/GOKX8wfyi3zXSh5qYo
	YelWGl5Ze0tCxPBRE4Gl1YNnHODyUMkggFAXSM57oAPLT3PgJupA9ZUa9eteT4VpIXEPSDsHNo2Oh
	rtzuKb3YULipaByyC8uWSfS7Wiio43QGVT7JVr4oT/xnNidT6yKg/9pYiS2G6Z/cFEuuIIqhlmNNg
	cwk7gDRxiTl0BpJEbU0A==;
Received: from localhost ([127.0.0.1] helo=bombadil.infradead.org)
	by bombadil.infradead.org with esmtp (Exim 4.92.3 #3 (Red Hat Linux))
	id 1iaHZw-0004Th-VL; Thu, 28 Nov 2019 11:03:20 +0000
Received: from lelv0143.ext.ti.com ([198.47.23.248])
 by bombadil.infradead.org with esmtps (Exim 4.92.3 #3 (Red Hat Linux))
 id 1iaHX4-000287-Gj
 for linux-arm-kernel@lists.infradead.org; Thu, 28 Nov 2019 11:00:29 +0000
Received: from fllv0035.itg.ti.com ([10.64.41.0])
 by lelv0143.ext.ti.com (8.15.2/8.15.2) with ESMTP id xASB0HxX123143;
 Thu, 28 Nov 2019 05:00:17 -0600
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=ti.com;
 s=ti-com-17Q1; t=1574938817;
 bh=V5LVr9wpmJ4bFFTFsV/Vh9lPctohl0VRVAIG46MOUUQ=;
 h=From:To:CC:Subject:Date:In-Reply-To:References;
 b=M/+9Bu1gy+dbJwGO4vhPrJxlhB37D0eQca8DDZs9/tTIkBVhyJnqb2ksf/2wHBqeU
 GdAuI5HRCqP4ShMOI9C1gqx7f6+AoToS0hMz/ycDEawv9g/EAoJ2aNl4gNGz5AG7ei
 DeVv0Hv7ZKIXb/fgiT6zb8W3ReMwv9mW9V8KzUDk=
Received: from DFLE100.ent.ti.com (dfle100.ent.ti.com [10.64.6.21])
 by fllv0035.itg.ti.com (8.15.2/8.15.2) with ESMTP id xASB0HAD007067;
 Thu, 28 Nov 2019 05:00:17 -0600
Received: from DFLE110.ent.ti.com (10.64.6.31) by DFLE100.ent.ti.com
 (10.64.6.21) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256) id 15.1.1847.3; Thu, 28
 Nov 2019 05:00:17 -0600
Received: from lelv0326.itg.ti.com (10.180.67.84) by DFLE110.ent.ti.com
 (10.64.6.31) with Microsoft SMTP Server (version=TLS1_2,
 cipher=TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256_P256) id 15.1.1847.3 via
 Frontend Transport; Thu, 28 Nov 2019 05:00:16 -0600
Received: from feketebors.ti.com (ileax41-snat.itg.ti.com [10.172.224.153])
 by lelv0326.itg.ti.com (8.15.2/8.15.2) with ESMTP id xASAxgJN073287;
 Thu, 28 Nov 2019 05:00:14 -0600
From: Peter Ujfalusi <peter.ujfalusi@ti.com>
To: <vkoul@kernel.org>, <robh+dt@kernel.org>, <nm@ti.com>,
 <ssantosh@kernel.org>
Subject: [PATCH v6 09/17] dmaengine: ti: New driver for K3 UDMA - split#1:
 defines, structs, io func
Date: Thu, 28 Nov 2019 12:59:37 +0200
Message-ID: <20191128105945.13071-10-peter.ujfalusi@ti.com>
X-Mailer: git-send-email 2.24.0
In-Reply-To: <20191128105945.13071-1-peter.ujfalusi@ti.com>
References: <20191128105945.13071-1-peter.ujfalusi@ti.com>
MIME-Version: 1.0
X-EXCLAIMER-MD-CONFIG: e1e8a2fd-e40a-4ac6-ac9b-f7e9cc9ee180
X-CRM114-Version: 20100106-BlameMichelson ( TRE 0.8.0 (BSD) ) MR-646709E3 
X-CRM114-CacheID: sfid-20191128_030023_412489_8087176B 
X-CRM114-Status: GOOD (  19.11  )
X-Spam-Score: -2.5 (--)
X-Spam-Report: SpamAssassin version 3.4.2 on bombadil.infradead.org summary:
 Content analysis details:   (-2.5 points)
 pts rule name              description
 ---- ---------------------- --------------------------------------------------
 -2.3 RCVD_IN_DNSWL_MED      RBL: Sender listed at https://www.dnswl.org/,
 medium trust [198.47.23.248 listed in list.dnswl.org]
 0.0 SPF_HELO_NONE          SPF: HELO does not publish an SPF Record
 -0.0 SPF_PASS               SPF: sender matches SPF record
 0.1 DKIM_SIGNED            Message has a DKIM or DK signature, not necessarily
 valid
 -0.1 DKIM_VALID Message has at least one valid DKIM or DK signature
 -0.1 DKIM_VALID_EF          Message has a valid DKIM or DK signature from
 envelope-from domain
 -0.1 DKIM_VALID_AU          Message has a valid DKIM or DK signature from
 author's domain
 -0.0 DKIMWL_WL_HIGH         DKIMwl.org - Whitelisted High sender
X-BeenThere: linux-arm-kernel@lists.infradead.org
X-Mailman-Version: 2.1.29
Precedence: list
List-Id: <linux-arm-kernel.lists.infradead.org>
List-Unsubscribe: <http://lists.infradead.org/mailman/options/linux-arm-kernel>, 
 <mailto:linux-arm-kernel-request@lists.infradead.org?subject=unsubscribe>
List-Archive: <http://lists.infradead.org/pipermail/linux-arm-kernel/>
List-Post: <mailto:linux-arm-kernel@lists.infradead.org>
List-Help: <mailto:linux-arm-kernel-request@lists.infradead.org?subject=help>
List-Subscribe: <http://lists.infradead.org/mailman/listinfo/linux-arm-kernel>, 
 <mailto:linux-arm-kernel-request@lists.infradead.org?subject=subscribe>
Cc: devicetree@vger.kernel.org, grygorii.strashko@ti.com, lokeshvutla@ti.com,
 j-keerthy@ti.com, linux-kernel@vger.kernel.org, t-kristo@ti.com,
 tony@atomide.com, dmaengine@vger.kernel.org, dan.j.williams@intel.com,
 linux-arm-kernel@lists.infradead.org
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Sender: "linux-arm-kernel" <linux-arm-kernel-bounces@lists.infradead.org>
Errors-To: linux-arm-kernel-bounces+lists+linux-arm-kernel=lfdr.de@lists.infradead.org

U3BsaXQgcGF0Y2ggZm9yIHJldmlldyBjb250YWluaW5nOiBkZWZpbmVzLCBzdHJ1Y3RzLCBpbyBh
bmQgbG93IGxldmVsCmZ1bmN0aW9ucyBhbmQgaW50ZXJydXB0IGNhbGxiYWNrcy4KCkRNQSBkcml2
ZXIgZm9yClRleGFzIEluc3RydW1lbnRzIEszIE5BVlNTIFVuaWZpZWQgRE1BIOKAkyBQZXJpcGhl
cmFsIFJvb3QgQ29tcGxleCAoVURNQS1QKQoKVGhlIFVETUEtUCBpcyBpbnRlbmRlZCB0byBwZXJm
b3JtIHNpbWlsYXIgKGJ1dCBzaWduaWZpY2FudGx5IHVwZ3JhZGVkKSBmdW5jdGlvbnMKYXMgdGhl
IHBhY2tldC1vcmllbnRlZCBETUEgdXNlZCBvbiBwcmV2aW91cyBTb0MgZGV2aWNlcy4gVGhlIFVE
TUEtUCBtb2R1bGUKc3VwcG9ydHMgdGhlIHRyYW5zbWlzc2lvbiBhbmQgcmVjZXB0aW9uIG9mIHZh
cmlvdXMgcGFja2V0IHR5cGVzLiBUaGUgVURNQS1QIGlzCmFyY2hpdGVjdGVkIHRvIGZhY2lsaXRh
dGUgdGhlIHNlZ21lbnRhdGlvbiBhbmQgcmVhc3NlbWJseSBvZiBTb0MgRE1BIGRhdGEKc3RydWN0
dXJlIGNvbXBsaWFudCBwYWNrZXRzIHRvL2Zyb20gc21hbGxlciBkYXRhIGJsb2NrcyB0aGF0IGFy
ZSBuYXRpdmVseQpjb21wYXRpYmxlIHdpdGggdGhlIHNwZWNpZmljIHJlcXVpcmVtZW50cyBvZiBl
YWNoIGNvbm5lY3RlZCBwZXJpcGhlcmFsLiBNdWx0aXBsZQpUeCBhbmQgUnggY2hhbm5lbHMgYXJl
IHByb3ZpZGVkIHdpdGhpbiB0aGUgRE1BIHdoaWNoIGFsbG93IG11bHRpcGxlIHNlZ21lbnRhdGlv
bgpvciByZWFzc2VtYmx5IG9wZXJhdGlvbnMgdG8gYmUgb25nb2luZy4gVGhlIERNQSBjb250cm9s
bGVyIG1haW50YWlucyBzdGF0ZQppbmZvcm1hdGlvbiBmb3IgZWFjaCBvZiB0aGUgY2hhbm5lbHMg
d2hpY2ggYWxsb3dzIHBhY2tldCBzZWdtZW50YXRpb24gYW5kCnJlYXNzZW1ibHkgb3BlcmF0aW9u
cyB0byBiZSB0aW1lIGRpdmlzaW9uIG11bHRpcGxleGVkIGJldHdlZW4gY2hhbm5lbHMgaW4gb3Jk
ZXIKdG8gc2hhcmUgdGhlIHVuZGVybHlpbmcgRE1BIGhhcmR3YXJlLiBBbiBleHRlcm5hbCBETUEg
c2NoZWR1bGVyIGlzIHVzZWQgdG8KY29udHJvbCB0aGUgb3JkZXJpbmcgYW5kIHJhdGUgYXQgd2hp
Y2ggdGhpcyBtdWx0aXBsZXhpbmcgb2NjdXJzIGZvciBUcmFuc21pdApvcGVyYXRpb25zLiBUaGUg
b3JkZXJpbmcgYW5kIHJhdGUgb2YgUmVjZWl2ZSBvcGVyYXRpb25zIGlzIGluZGlyZWN0bHkgY29u
dHJvbGxlZApieSB0aGUgb3JkZXIgaW4gd2hpY2ggYmxvY2tzIGFyZSBwdXNoZWQgaW50byB0aGUg
RE1BIG9uIHRoZSBSeCBQU0ktTCBpbnRlcmZhY2UuCgpUaGUgVURNQS1QIGFsc28gc3VwcG9ydHMg
YWN0aW5nIGFzIGJvdGggYSBVVEMgYW5kIFVETUEtQyBmb3IgaXRzIGludGVybmFsCmNoYW5uZWxz
LiBDaGFubmVscyBpbiB0aGUgVURNQS1QIGNhbiBiZSBjb25maWd1cmVkIHRvIGJlIGVpdGhlciBQ
YWNrZXQtQmFzZWQgb3IKVGhpcmQtUGFydHkgY2hhbm5lbHMgb24gYSBjaGFubmVsIGJ5IGNoYW5u
ZWwgYmFzaXMuCgpUaGUgaW5pdGlhbCBkcml2ZXIgc3VwcG9ydHM6Ci0gTUVNX1RPX01FTSAoVFIg
bW9kZSkKLSBERVZfVE9fTUVNIChQYWNrZXQgLyBUUiBtb2RlKQotIE1FTV9UT19ERVYgKFBhY2tl
dCAvIFRSIG1vZGUpCi0gQ3ljbGljIChQYWNrZXQgLyBUUiBtb2RlKQotIE1ldGFkYXRhIGZvciBk
ZXNjcmlwdG9ycwoKU2lnbmVkLW9mZi1ieTogUGV0ZXIgVWpmYWx1c2kgPHBldGVyLnVqZmFsdXNp
QHRpLmNvbT4KLS0tCiBkcml2ZXJzL2RtYS90aS9rMy11ZG1hLmMgfCAxMDQ5ICsrKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrCiBkcml2ZXJzL2RtYS90aS9rMy11ZG1hLmggfCAg
MTIwICsrKysrCiAyIGZpbGVzIGNoYW5nZWQsIDExNjkgaW5zZXJ0aW9ucygrKQogY3JlYXRlIG1v
ZGUgMTAwNjQ0IGRyaXZlcnMvZG1hL3RpL2szLXVkbWEuYwogY3JlYXRlIG1vZGUgMTAwNjQ0IGRy
aXZlcnMvZG1hL3RpL2szLXVkbWEuaAoKZGlmZiAtLWdpdCBhL2RyaXZlcnMvZG1hL3RpL2szLXVk
bWEuYyBiL2RyaXZlcnMvZG1hL3RpL2szLXVkbWEuYwpuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRl
eCAwMDAwMDAwMDAwMDAuLjBmN2U1NmYwNGE1NgotLS0gL2Rldi9udWxsCisrKyBiL2RyaXZlcnMv
ZG1hL3RpL2szLXVkbWEuYwpAQCAtMCwwICsxLDEwNDkgQEAKKy8vIFNQRFgtTGljZW5zZS1JZGVu
dGlmaWVyOiBHUEwtMi4wCisvKgorICogIENvcHlyaWdodCAoQykgMjAxOSBUZXhhcyBJbnN0cnVt
ZW50cyBJbmNvcnBvcmF0ZWQgLSBodHRwOi8vd3d3LnRpLmNvbQorICogIEF1dGhvcjogUGV0ZXIg
VWpmYWx1c2kgPHBldGVyLnVqZmFsdXNpQHRpLmNvbT4KKyAqLworCisjaW5jbHVkZSA8bGludXgv
a2VybmVsLmg+CisjaW5jbHVkZSA8bGludXgvZG1hZW5naW5lLmg+CisjaW5jbHVkZSA8bGludXgv
ZG1hLW1hcHBpbmcuaD4KKyNpbmNsdWRlIDxsaW51eC9kbWFwb29sLmg+CisjaW5jbHVkZSA8bGlu
dXgvZXJyLmg+CisjaW5jbHVkZSA8bGludXgvaW5pdC5oPgorI2luY2x1ZGUgPGxpbnV4L2ludGVy
cnVwdC5oPgorI2luY2x1ZGUgPGxpbnV4L2xpc3QuaD4KKyNpbmNsdWRlIDxsaW51eC9tb2R1bGUu
aD4KKyNpbmNsdWRlIDxsaW51eC9wbGF0Zm9ybV9kZXZpY2UuaD4KKyNpbmNsdWRlIDxsaW51eC9z
bGFiLmg+CisjaW5jbHVkZSA8bGludXgvc3BpbmxvY2suaD4KKyNpbmNsdWRlIDxsaW51eC9vZi5o
PgorI2luY2x1ZGUgPGxpbnV4L29mX2RtYS5oPgorI2luY2x1ZGUgPGxpbnV4L29mX2RldmljZS5o
PgorI2luY2x1ZGUgPGxpbnV4L29mX2lycS5oPgorI2luY2x1ZGUgPGxpbnV4L3dvcmtxdWV1ZS5o
PgorI2luY2x1ZGUgPGxpbnV4L2NvbXBsZXRpb24uaD4KKyNpbmNsdWRlIDxsaW51eC9zb2MvdGkv
azMtcmluZ2FjYy5oPgorI2luY2x1ZGUgPGxpbnV4L3NvYy90aS90aV9zY2lfcHJvdG9jb2wuaD4K
KyNpbmNsdWRlIDxsaW51eC9zb2MvdGkvdGlfc2NpX2ludGFfbXNpLmg+CisjaW5jbHVkZSA8bGlu
dXgvZG1hL3RpLWNwcGk1Lmg+CisKKyNpbmNsdWRlICIuLi92aXJ0LWRtYS5oIgorI2luY2x1ZGUg
ImszLXVkbWEuaCIKKyNpbmNsdWRlICJrMy1wc2lsLXByaXYuaCIKKworc3RydWN0IHVkbWFfc3Rh
dGljX3RyIHsKKwl1OCBlbHNpemU7IC8qIFJQU1RSMCAqLworCXUxNiBlbGNudDsgLyogUlBTVFIw
ICovCisJdTE2IGJzdGNudDsgLyogUlBTVFIxICovCit9OworCisjZGVmaW5lIEszX1VETUFfTUFY
X1JGTE9XUwkJMTAyNAorI2RlZmluZSBLM19VRE1BX0RFRkFVTFRfUklOR19TSVpFCTE2CisKKy8q
IEhvdyBTUkMvRFNUIHRhZyBzaG91bGQgYmUgdXBkYXRlZCBieSBVRE1BIGluIHRoZSBkZXNjcmlw
dG9yJ3MgV29yZCAzICovCisjZGVmaW5lIFVETUFfUkZMT1dfU1JDVEFHX05PTkUJCTAKKyNkZWZp
bmUgVURNQV9SRkxPV19TUkNUQUdfQ0ZHX1RBRwkxCisjZGVmaW5lIFVETUFfUkZMT1dfU1JDVEFH
X0ZMT1dfSUQJMgorI2RlZmluZSBVRE1BX1JGTE9XX1NSQ1RBR19TUkNfVEFHCTQKKworI2RlZmlu
ZSBVRE1BX1JGTE9XX0RTVFRBR19OT05FCQkwCisjZGVmaW5lIFVETUFfUkZMT1dfRFNUVEFHX0NG
R19UQUcJMQorI2RlZmluZSBVRE1BX1JGTE9XX0RTVFRBR19GTE9XX0lECTIKKyNkZWZpbmUgVURN
QV9SRkxPV19EU1RUQUdfRFNUX1RBR19MTwk0CisjZGVmaW5lIFVETUFfUkZMT1dfRFNUVEFHX0RT
VF9UQUdfSEkJNQorCitzdHJ1Y3QgdWRtYV9jaGFuOworCitlbnVtIHVkbWFfbW1yIHsKKwlNTVJf
R0NGRyA9IDAsCisJTU1SX1JDSEFOUlQsCisJTU1SX1RDSEFOUlQsCisJTU1SX0xBU1QsCit9Owor
CitzdGF0aWMgY29uc3QgY2hhciAqIGNvbnN0IG1tcl9uYW1lc1tdID0geyAiZ2NmZyIsICJyY2hh
bnJ0IiwgInRjaGFucnQiIH07CisKK3N0cnVjdCB1ZG1hX3RjaGFuIHsKKwl2b2lkIF9faW9tZW0g
KnJlZ19ydDsKKworCWludCBpZDsKKwlzdHJ1Y3QgazNfcmluZyAqdF9yaW5nOyAvKiBUcmFuc21p
dCByaW5nICovCisJc3RydWN0IGszX3JpbmcgKnRjX3Jpbmc7IC8qIFRyYW5zbWl0IENvbXBsZXRp
b24gcmluZyAqLworfTsKKworc3RydWN0IHVkbWFfcmZsb3cgeworCWludCBpZDsKKwlzdHJ1Y3Qg
azNfcmluZyAqZmRfcmluZzsgLyogRnJlZSBEZXNjcmlwdG9yIHJpbmcgKi8KKwlzdHJ1Y3QgazNf
cmluZyAqcl9yaW5nOyAvKiBSZWNlaXZlIHJpbmcgKi8KK307CisKK3N0cnVjdCB1ZG1hX3JjaGFu
IHsKKwl2b2lkIF9faW9tZW0gKnJlZ19ydDsKKworCWludCBpZDsKK307CisKKyNkZWZpbmUgVURN
QV9GTEFHX1BETUFfQUNDMzIJCUJJVCgwKQorI2RlZmluZSBVRE1BX0ZMQUdfUERNQV9CVVJTVAkJ
QklUKDEpCisKK3N0cnVjdCB1ZG1hX21hdGNoX2RhdGEgeworCXUzMiBwc2lsX2Jhc2U7CisJYm9v
bCBlbmFibGVfbWVtY3B5X3N1cHBvcnQ7CisJdTMyIGZsYWdzOworCXUzMiBzdGF0aWN0cl96X21h
c2s7CisJdTMyIHJjaGFuX29lc19vZmZzZXQ7CisKKwl1OCB0cGxfbGV2ZWxzOworCXUzMiBsZXZl
bF9zdGFydF9pZHhbXTsKK307CisKK3N0cnVjdCB1ZG1hX2RldiB7CisJc3RydWN0IGRtYV9kZXZp
Y2UgZGRldjsKKwlzdHJ1Y3QgZGV2aWNlICpkZXY7CisJdm9pZCBfX2lvbWVtICptbXJzW01NUl9M
QVNUXTsKKwljb25zdCBzdHJ1Y3QgdWRtYV9tYXRjaF9kYXRhICptYXRjaF9kYXRhOworCisJc2l6
ZV90IGRlc2NfYWxpZ247IC8qIGFsaWdubWVudCB0byB1c2UgZm9yIGRlc2NyaXB0b3JzICovCisK
KwlzdHJ1Y3QgdWRtYV90aXNjaV9ybSB0aXNjaV9ybTsKKworCXN0cnVjdCBrM19yaW5nYWNjICpy
aW5nYWNjOworCisJc3RydWN0IHdvcmtfc3RydWN0IHB1cmdlX3dvcms7CisJc3RydWN0IGxpc3Rf
aGVhZCBkZXNjX3RvX3B1cmdlOworCXNwaW5sb2NrX3QgbG9jazsKKworCWludCB0Y2hhbl9jbnQ7
CisJaW50IGVjaGFuX2NudDsKKwlpbnQgcmNoYW5fY250OworCWludCByZmxvd19jbnQ7CisJdW5z
aWduZWQgbG9uZyAqdGNoYW5fbWFwOworCXVuc2lnbmVkIGxvbmcgKnJjaGFuX21hcDsKKwl1bnNp
Z25lZCBsb25nICpyZmxvd19ncF9tYXA7CisJdW5zaWduZWQgbG9uZyAqcmZsb3dfZ3BfbWFwX2Fs
bG9jYXRlZDsKKwl1bnNpZ25lZCBsb25nICpyZmxvd19pbl91c2U7CisKKwlzdHJ1Y3QgdWRtYV90
Y2hhbiAqdGNoYW5zOworCXN0cnVjdCB1ZG1hX3JjaGFuICpyY2hhbnM7CisJc3RydWN0IHVkbWFf
cmZsb3cgKnJmbG93czsKKworCXN0cnVjdCB1ZG1hX2NoYW4gKmNoYW5uZWxzOworCXUzMiBwc2ls
X2Jhc2U7Cit9OworCitzdHJ1Y3QgdWRtYV9od2Rlc2MgeworCXNpemVfdCBjcHBpNV9kZXNjX3Np
emU7CisJdm9pZCAqY3BwaTVfZGVzY192YWRkcjsKKwlkbWFfYWRkcl90IGNwcGk1X2Rlc2NfcGFk
ZHI7CisKKwkvKiBUUiBkZXNjcmlwdG9yIGludGVybmFsIHBvaW50ZXJzICovCisJdm9pZCAqdHJf
cmVxX2Jhc2U7CisJc3RydWN0IGNwcGk1X3RyX3Jlc3BfdCAqdHJfcmVzcF9iYXNlOworfTsKKwor
c3RydWN0IHVkbWFfZGVzYyB7CisJc3RydWN0IHZpcnRfZG1hX2Rlc2MgdmQ7CisKKwlib29sIHRl
cm1pbmF0ZWQ7CisKKwllbnVtIGRtYV90cmFuc2Zlcl9kaXJlY3Rpb24gZGlyOworCisJc3RydWN0
IHVkbWFfc3RhdGljX3RyIHN0YXRpY190cjsKKwl1MzIgcmVzaWR1ZTsKKworCXVuc2lnbmVkIGlu
dCBzZ2xlbjsKKwl1bnNpZ25lZCBpbnQgZGVzY19pZHg7IC8qIE9ubHkgdXNlZCBmb3IgY3ljbGlj
IGluIHBhY2tldCBtb2RlICovCisJdW5zaWduZWQgaW50IHRyX2lkeDsKKworCXUzMiBtZXRhZGF0
YV9zaXplOworCXZvaWQgKm1ldGFkYXRhOyAvKiBwb2ludGVyIHRvIHByb3ZpZGVkIG1ldGFkYXRh
IGJ1ZmZlciAoRVBJUCwgUFNkYXRhKSAqLworCisJdW5zaWduZWQgaW50IGh3ZGVzY19jb3VudDsK
KwlzdHJ1Y3QgdWRtYV9od2Rlc2MgaHdkZXNjWzBdOworfTsKKworZW51bSB1ZG1hX2NoYW5fc3Rh
dGUgeworCVVETUFfQ0hBTl9JU19JRExFID0gMCwgLyogbm90IGFjdGl2ZSwgbm8gdGVhcmRvd24g
aXMgaW4gcHJvZ3Jlc3MgKi8KKwlVRE1BX0NIQU5fSVNfQUNUSVZFLCAvKiBOb3JtYWwgb3BlcmF0
aW9uICovCisJVURNQV9DSEFOX0lTX0FDVElWRV9GTFVTSCwgLyogRmx1c2hpbmcgZm9yIGRlbGF5
ZWQgdHggKi8KKwlVRE1BX0NIQU5fSVNfVEVSTUlOQVRJTkcsIC8qIGNoYW5uZWwgaXMgYmVpbmcg
dGVybWluYXRlZCAqLworfTsKKworc3RydWN0IHVkbWFfY2hhbiB7CisJc3RydWN0IHZpcnRfZG1h
X2NoYW4gdmM7CisJc3RydWN0IGRtYV9zbGF2ZV9jb25maWcJY2ZnOworCXN0cnVjdCB1ZG1hX2Rl
diAqdWQ7CisJc3RydWN0IHVkbWFfZGVzYyAqZGVzYzsKKwlzdHJ1Y3QgdWRtYV9kZXNjICp0ZXJt
aW5hdGVkX2Rlc2M7CisJc3RydWN0IHVkbWFfc3RhdGljX3RyIHN0YXRpY190cjsKKwljaGFyICpu
YW1lOworCisJc3RydWN0IHVkbWFfdGNoYW4gKnRjaGFuOworCXN0cnVjdCB1ZG1hX3JjaGFuICpy
Y2hhbjsKKwlzdHJ1Y3QgdWRtYV9yZmxvdyAqcmZsb3c7CisKKwlib29sIHBzaWxfcGFpcmVkOwor
CisJaW50IGlycV9udW1fcmluZzsKKwlpbnQgaXJxX251bV91ZG1hOworCisJYm9vbCBjeWNsaWM7
CisJYm9vbCBwYXVzZWQ7CisKKwllbnVtIHVkbWFfY2hhbl9zdGF0ZSBzdGF0ZTsKKwlzdHJ1Y3Qg
Y29tcGxldGlvbiB0ZWFyZG93bl9jb21wbGV0ZWQ7CisKKwl1MzIgYmNudDsgLyogbnVtYmVyIG9m
IGJ5dGVzIGNvbXBsZXRlZCBzaW5jZSB0aGUgc3RhcnQgb2YgdGhlIGNoYW5uZWwgKi8KKwl1MzIg
aW5fcmluZ19jbnQ7IC8qIG51bWJlciBvZiBkZXNjcmlwdG9ycyBpbiBmbGlnaHQgKi8KKworCWJv
b2wgcGt0X21vZGU7IC8qIFRSIG9yIHBhY2tldCAqLworCWJvb2wgbmVlZHNfZXBpYjsgLyogRVBJ
QiBpcyBuZWVkZWQgZm9yIHRoZSBjb21tdW5pY2F0aW9uIG9yIG5vdCAqLworCXUzMiBwc2Rfc2l6
ZTsgLyogc2l6ZSBvZiBQcm90b2NvbCBTcGVjaWZpYyBEYXRhICovCisJdTMyIG1ldGFkYXRhX3Np
emU7IC8qIChuZWVkc19lcGliID8gMTY6MCkgKyBwc2Rfc2l6ZSAqLworCXUzMiBoZGVzY19zaXpl
OyAvKiBTaXplIG9mIGEgcGFja2V0IGRlc2NyaXB0b3IgaW4gcGFja2V0IG1vZGUgKi8KKwlib29s
IG5vdGRwa3Q7IC8qIFN1cHByZXNzIHNlbmRpbmcgVERDIHBhY2tldCAqLworCWludCByZW1vdGVf
dGhyZWFkX2lkOworCXUzMiBzcmNfdGhyZWFkOworCXUzMiBkc3RfdGhyZWFkOworCWVudW0gcHNp
bF9lbmRwb2ludF90eXBlIGVwX3R5cGU7CisJYm9vbCBlbmFibGVfYWNjMzI7CisJYm9vbCBlbmFi
bGVfYnVyc3Q7CisJZW51bSB1ZG1hX3RwX2xldmVsIGNoYW5uZWxfdHBsOyAvKiBDaGFubmVsIFRo
cm91Z2hwdXQgTGV2ZWwgKi8KKworCS8qIGRtYXBvb2wgZm9yIHBhY2tldCBtb2RlIGRlc2NyaXB0
b3JzICovCisJYm9vbCB1c2VfZG1hX3Bvb2w7CisJc3RydWN0IGRtYV9wb29sICpoZGVzY19wb29s
OworCisJdTMyIGlkOworCWVudW0gZG1hX3RyYW5zZmVyX2RpcmVjdGlvbiBkaXI7Cit9OworCitz
dGF0aWMgaW5saW5lIHN0cnVjdCB1ZG1hX2RldiAqdG9fdWRtYV9kZXYoc3RydWN0IGRtYV9kZXZp
Y2UgKmQpCit7CisJcmV0dXJuIGNvbnRhaW5lcl9vZihkLCBzdHJ1Y3QgdWRtYV9kZXYsIGRkZXYp
OworfQorCitzdGF0aWMgaW5saW5lIHN0cnVjdCB1ZG1hX2NoYW4gKnRvX3VkbWFfY2hhbihzdHJ1
Y3QgZG1hX2NoYW4gKmMpCit7CisJcmV0dXJuIGNvbnRhaW5lcl9vZihjLCBzdHJ1Y3QgdWRtYV9j
aGFuLCB2Yy5jaGFuKTsKK30KKworc3RhdGljIGlubGluZSBzdHJ1Y3QgdWRtYV9kZXNjICp0b191
ZG1hX2Rlc2Moc3RydWN0IGRtYV9hc3luY190eF9kZXNjcmlwdG9yICp0KQoreworCXJldHVybiBj
b250YWluZXJfb2YodCwgc3RydWN0IHVkbWFfZGVzYywgdmQudHgpOworfQorCisvKiBHZW5lcmlj
IHJlZ2lzdGVyIGFjY2VzcyBmdW5jdGlvbnMgKi8KK3N0YXRpYyBpbmxpbmUgdTMyIHVkbWFfcmVh
ZCh2b2lkIF9faW9tZW0gKmJhc2UsIGludCByZWcpCit7CisJcmV0dXJuIHJlYWRsKGJhc2UgKyBy
ZWcpOworfQorCitzdGF0aWMgaW5saW5lIHZvaWQgdWRtYV93cml0ZSh2b2lkIF9faW9tZW0gKmJh
c2UsIGludCByZWcsIHUzMiB2YWwpCit7CisJd3JpdGVsKHZhbCwgYmFzZSArIHJlZyk7Cit9CisK
K3N0YXRpYyBpbmxpbmUgdm9pZCB1ZG1hX3VwZGF0ZV9iaXRzKHZvaWQgX19pb21lbSAqYmFzZSwg
aW50IHJlZywKKwkJCQkgICAgdTMyIG1hc2ssIHUzMiB2YWwpCit7CisJdTMyIHRtcCwgb3JpZzsK
KworCW9yaWcgPSByZWFkbChiYXNlICsgcmVnKTsKKwl0bXAgPSBvcmlnICYgfm1hc2s7CisJdG1w
IHw9ICh2YWwgJiBtYXNrKTsKKworCWlmICh0bXAgIT0gb3JpZykKKwkJd3JpdGVsKHRtcCwgYmFz
ZSArIHJlZyk7Cit9CisKKy8qIFRDSEFOUlQgKi8KK3N0YXRpYyBpbmxpbmUgdTMyIHVkbWFfdGNo
YW5ydF9yZWFkKHN0cnVjdCB1ZG1hX3RjaGFuICp0Y2hhbiwgaW50IHJlZykKK3sKKwlpZiAoIXRj
aGFuKQorCQlyZXR1cm4gMDsKKwlyZXR1cm4gdWRtYV9yZWFkKHRjaGFuLT5yZWdfcnQsIHJlZyk7
Cit9CisKK3N0YXRpYyBpbmxpbmUgdm9pZCB1ZG1hX3RjaGFucnRfd3JpdGUoc3RydWN0IHVkbWFf
dGNoYW4gKnRjaGFuLCBpbnQgcmVnLAorCQkJCSAgICAgIHUzMiB2YWwpCit7CisJaWYgKCF0Y2hh
bikKKwkJcmV0dXJuOworCXVkbWFfd3JpdGUodGNoYW4tPnJlZ19ydCwgcmVnLCB2YWwpOworfQor
CitzdGF0aWMgaW5saW5lIHZvaWQgdWRtYV90Y2hhbnJ0X3VwZGF0ZV9iaXRzKHN0cnVjdCB1ZG1h
X3RjaGFuICp0Y2hhbiwgaW50IHJlZywKKwkJCQkJICAgIHUzMiBtYXNrLCB1MzIgdmFsKQorewor
CWlmICghdGNoYW4pCisJCXJldHVybjsKKwl1ZG1hX3VwZGF0ZV9iaXRzKHRjaGFuLT5yZWdfcnQs
IHJlZywgbWFzaywgdmFsKTsKK30KKworLyogUkNIQU5SVCAqLworc3RhdGljIGlubGluZSB1MzIg
dWRtYV9yY2hhbnJ0X3JlYWQoc3RydWN0IHVkbWFfcmNoYW4gKnJjaGFuLCBpbnQgcmVnKQorewor
CWlmICghcmNoYW4pCisJCXJldHVybiAwOworCXJldHVybiB1ZG1hX3JlYWQocmNoYW4tPnJlZ19y
dCwgcmVnKTsKK30KKworc3RhdGljIGlubGluZSB2b2lkIHVkbWFfcmNoYW5ydF93cml0ZShzdHJ1
Y3QgdWRtYV9yY2hhbiAqcmNoYW4sIGludCByZWcsCisJCQkJICAgICAgdTMyIHZhbCkKK3sKKwlp
ZiAoIXJjaGFuKQorCQlyZXR1cm47CisJdWRtYV93cml0ZShyY2hhbi0+cmVnX3J0LCByZWcsIHZh
bCk7Cit9CisKK3N0YXRpYyBpbmxpbmUgdm9pZCB1ZG1hX3JjaGFucnRfdXBkYXRlX2JpdHMoc3Ry
dWN0IHVkbWFfcmNoYW4gKnJjaGFuLCBpbnQgcmVnLAorCQkJCQkgICAgdTMyIG1hc2ssIHUzMiB2
YWwpCit7CisJaWYgKCFyY2hhbikKKwkJcmV0dXJuOworCXVkbWFfdXBkYXRlX2JpdHMocmNoYW4t
PnJlZ19ydCwgcmVnLCBtYXNrLCB2YWwpOworfQorCitzdGF0aWMgaW50IG5hdnNzX3BzaWxfcGFp
cihzdHJ1Y3QgdWRtYV9kZXYgKnVkLCB1MzIgc3JjX3RocmVhZCwgdTMyIGRzdF90aHJlYWQpCit7
CisJc3RydWN0IHVkbWFfdGlzY2lfcm0gKnRpc2NpX3JtID0gJnVkLT50aXNjaV9ybTsKKworCWRz
dF90aHJlYWQgfD0gSzNfUFNJTF9EU1RfVEhSRUFEX0lEX09GRlNFVDsKKwlyZXR1cm4gdGlzY2lf
cm0tPnRpc2NpX3BzaWxfb3BzLT5wYWlyKHRpc2NpX3JtLT50aXNjaSwKKwkJCQkJICAgICAgdGlz
Y2lfcm0tPnRpc2NpX25hdnNzX2Rldl9pZCwKKwkJCQkJICAgICAgc3JjX3RocmVhZCwgZHN0X3Ro
cmVhZCk7Cit9CisKK3N0YXRpYyBpbnQgbmF2c3NfcHNpbF91bnBhaXIoc3RydWN0IHVkbWFfZGV2
ICp1ZCwgdTMyIHNyY190aHJlYWQsCisJCQkgICAgIHUzMiBkc3RfdGhyZWFkKQoreworCXN0cnVj
dCB1ZG1hX3Rpc2NpX3JtICp0aXNjaV9ybSA9ICZ1ZC0+dGlzY2lfcm07CisKKwlkc3RfdGhyZWFk
IHw9IEszX1BTSUxfRFNUX1RIUkVBRF9JRF9PRkZTRVQ7CisJcmV0dXJuIHRpc2NpX3JtLT50aXNj
aV9wc2lsX29wcy0+dW5wYWlyKHRpc2NpX3JtLT50aXNjaSwKKwkJCQkJCXRpc2NpX3JtLT50aXNj
aV9uYXZzc19kZXZfaWQsCisJCQkJCQlzcmNfdGhyZWFkLCBkc3RfdGhyZWFkKTsKK30KKworc3Rh
dGljIGNoYXIgKnVkbWFfZ2V0X2Rpcl90ZXh0KGVudW0gZG1hX3RyYW5zZmVyX2RpcmVjdGlvbiBk
aXIpCit7CisJc3dpdGNoIChkaXIpIHsKKwljYXNlIERNQV9ERVZfVE9fTUVNOgorCQlyZXR1cm4g
IkRFVl9UT19NRU0iOworCWNhc2UgRE1BX01FTV9UT19ERVY6CisJCXJldHVybiAiTUVNX1RPX0RF
ViI7CisJY2FzZSBETUFfTUVNX1RPX01FTToKKwkJcmV0dXJuICJNRU1fVE9fTUVNIjsKKwljYXNl
IERNQV9ERVZfVE9fREVWOgorCQlyZXR1cm4gIkRFVl9UT19ERVYiOworCWRlZmF1bHQ6CisJCWJy
ZWFrOworCX0KKworCXJldHVybiAiaW52YWxpZCI7Cit9CisKK3N0YXRpYyB2b2lkIHVkbWFfcmVz
ZXRfdWNoYW4oc3RydWN0IHVkbWFfY2hhbiAqdWMpCit7CisJdWMtPnN0YXRlID0gVURNQV9DSEFO
X0lTX0lETEU7CisJdWMtPnJlbW90ZV90aHJlYWRfaWQgPSAtMTsKKwl1Yy0+ZGlyID0gRE1BX01F
TV9UT19NRU07CisJdWMtPnBrdF9tb2RlID0gZmFsc2U7CisJdWMtPmVwX3R5cGUgPSBQU0lMX0VQ
X05BVElWRTsKKwl1Yy0+ZW5hYmxlX2FjYzMyID0gMDsKKwl1Yy0+ZW5hYmxlX2J1cnN0ID0gMDsK
Kwl1Yy0+Y2hhbm5lbF90cGwgPSAwOworCXVjLT5wc2Rfc2l6ZSA9IDA7CisJdWMtPm1ldGFkYXRh
X3NpemUgPSAwOworCXVjLT5oZGVzY19zaXplID0gMDsKKwl1Yy0+bm90ZHBrdCA9IDA7Cit9CisK
K3N0YXRpYyB2b2lkIHVkbWFfZHVtcF9jaGFuX3N0ZGF0YShzdHJ1Y3QgdWRtYV9jaGFuICp1YykK
K3sKKwlzdHJ1Y3QgZGV2aWNlICpkZXYgPSB1Yy0+dWQtPmRldjsKKwl1MzIgb2Zmc2V0OworCWlu
dCBpOworCisJaWYgKHVjLT5kaXIgPT0gRE1BX01FTV9UT19ERVYgfHwgdWMtPmRpciA9PSBETUFf
TUVNX1RPX01FTSkgeworCQlkZXZfZGJnKGRldiwgIlRDSEFOIFN0YXRlIGRhdGE6XG4iKTsKKwkJ
Zm9yIChpID0gMDsgaSA8IDMyOyBpKyspIHsKKwkJCW9mZnNldCA9IFVETUFfVENIQU5fUlRfU1RE
QVRBX1JFRyArIGkgKiA0OworCQkJZGV2X2RiZyhkZXYsICJUUlRfU1REQVRBWyUwMmRdOiAweCUw
OHhcbiIsIGksCisJCQkJdWRtYV90Y2hhbnJ0X3JlYWQodWMtPnRjaGFuLCBvZmZzZXQpKTsKKwkJ
fQorCX0KKworCWlmICh1Yy0+ZGlyID09IERNQV9ERVZfVE9fTUVNIHx8IHVjLT5kaXIgPT0gRE1B
X01FTV9UT19NRU0pIHsKKwkJZGV2X2RiZyhkZXYsICJSQ0hBTiBTdGF0ZSBkYXRhOlxuIik7CisJ
CWZvciAoaSA9IDA7IGkgPCAzMjsgaSsrKSB7CisJCQlvZmZzZXQgPSBVRE1BX1JDSEFOX1JUX1NU
REFUQV9SRUcgKyBpICogNDsKKwkJCWRldl9kYmcoZGV2LCAiUlJUX1NUREFUQVslMDJkXTogMHgl
MDh4XG4iLCBpLAorCQkJCXVkbWFfcmNoYW5ydF9yZWFkKHVjLT5yY2hhbiwgb2Zmc2V0KSk7CisJ
CX0KKwl9Cit9CisKK3N0YXRpYyBpbmxpbmUgZG1hX2FkZHJfdCB1ZG1hX2N1cnJfY3BwaTVfZGVz
Y19wYWRkcihzdHJ1Y3QgdWRtYV9kZXNjICpkLAorCQkJCQkJICAgIGludCBpZHgpCit7CisJcmV0
dXJuIGQtPmh3ZGVzY1tpZHhdLmNwcGk1X2Rlc2NfcGFkZHI7Cit9CisKK3N0YXRpYyBpbmxpbmUg
dm9pZCAqdWRtYV9jdXJyX2NwcGk1X2Rlc2NfdmFkZHIoc3RydWN0IHVkbWFfZGVzYyAqZCwgaW50
IGlkeCkKK3sKKwlyZXR1cm4gZC0+aHdkZXNjW2lkeF0uY3BwaTVfZGVzY192YWRkcjsKK30KKwor
c3RhdGljIHN0cnVjdCB1ZG1hX2Rlc2MgKnVkbWFfdWRtYV9kZXNjX2Zyb21fcGFkZHIoc3RydWN0
IHVkbWFfY2hhbiAqdWMsCisJCQkJCQkgICBkbWFfYWRkcl90IHBhZGRyKQoreworCXN0cnVjdCB1
ZG1hX2Rlc2MgKmQgPSB1Yy0+dGVybWluYXRlZF9kZXNjOworCisJaWYgKGQpIHsKKwkJZG1hX2Fk
ZHJfdCBkZXNjX3BhZGRyID0gdWRtYV9jdXJyX2NwcGk1X2Rlc2NfcGFkZHIoZCwKKwkJCQkJCQkJ
ICAgZC0+ZGVzY19pZHgpOworCisJCWlmIChkZXNjX3BhZGRyICE9IHBhZGRyKQorCQkJZCA9IE5V
TEw7CisJfQorCisJaWYgKCFkKSB7CisJCWQgPSB1Yy0+ZGVzYzsKKwkJaWYgKGQpIHsKKwkJCWRt
YV9hZGRyX3QgZGVzY19wYWRkciA9IHVkbWFfY3Vycl9jcHBpNV9kZXNjX3BhZGRyKGQsCisJCQkJ
CQkJCWQtPmRlc2NfaWR4KTsKKworCQkJaWYgKGRlc2NfcGFkZHIgIT0gcGFkZHIpCisJCQkJZCA9
IE5VTEw7CisJCX0KKwl9CisKKwlyZXR1cm4gZDsKK30KKworc3RhdGljIHZvaWQgdWRtYV9mcmVl
X2h3ZGVzYyhzdHJ1Y3QgdWRtYV9jaGFuICp1Yywgc3RydWN0IHVkbWFfZGVzYyAqZCkKK3sKKwlp
ZiAodWMtPnVzZV9kbWFfcG9vbCkgeworCQlpbnQgaTsKKworCQlmb3IgKGkgPSAwOyBpIDwgZC0+
aHdkZXNjX2NvdW50OyBpKyspIHsKKwkJCWlmICghZC0+aHdkZXNjW2ldLmNwcGk1X2Rlc2NfdmFk
ZHIpCisJCQkJY29udGludWU7CisKKwkJCWRtYV9wb29sX2ZyZWUodWMtPmhkZXNjX3Bvb2wsCisJ
CQkJICAgICAgZC0+aHdkZXNjW2ldLmNwcGk1X2Rlc2NfdmFkZHIsCisJCQkJICAgICAgZC0+aHdk
ZXNjW2ldLmNwcGk1X2Rlc2NfcGFkZHIpOworCisJCQlkLT5od2Rlc2NbaV0uY3BwaTVfZGVzY192
YWRkciA9IE5VTEw7CisJCX0KKwl9IGVsc2UgaWYgKGQtPmh3ZGVzY1swXS5jcHBpNV9kZXNjX3Zh
ZGRyKSB7CisJCXN0cnVjdCB1ZG1hX2RldiAqdWQgPSB1Yy0+dWQ7CisKKwkJZG1hX2ZyZWVfY29o
ZXJlbnQodWQtPmRldiwgZC0+aHdkZXNjWzBdLmNwcGk1X2Rlc2Nfc2l6ZSwKKwkJCQkgIGQtPmh3
ZGVzY1swXS5jcHBpNV9kZXNjX3ZhZGRyLAorCQkJCSAgZC0+aHdkZXNjWzBdLmNwcGk1X2Rlc2Nf
cGFkZHIpOworCisJCWQtPmh3ZGVzY1swXS5jcHBpNV9kZXNjX3ZhZGRyID0gTlVMTDsKKwl9Cit9
CisKK3N0YXRpYyB2b2lkIHVkbWFfcHVyZ2VfZGVzY193b3JrKHN0cnVjdCB3b3JrX3N0cnVjdCAq
d29yaykKK3sKKwlzdHJ1Y3QgdWRtYV9kZXYgKnVkID0gY29udGFpbmVyX29mKHdvcmssIHR5cGVv
ZigqdWQpLCBwdXJnZV93b3JrKTsKKwlzdHJ1Y3QgdmlydF9kbWFfZGVzYyAqdmQsICpfdmQ7CisJ
dW5zaWduZWQgbG9uZyBmbGFnczsKKwlMSVNUX0hFQUQoaGVhZCk7CisKKwlzcGluX2xvY2tfaXJx
c2F2ZSgmdWQtPmxvY2ssIGZsYWdzKTsKKwlsaXN0X3NwbGljZV90YWlsX2luaXQoJnVkLT5kZXNj
X3RvX3B1cmdlLCAmaGVhZCk7CisJc3Bpbl91bmxvY2tfaXJxcmVzdG9yZSgmdWQtPmxvY2ssIGZs
YWdzKTsKKworCWxpc3RfZm9yX2VhY2hfZW50cnlfc2FmZSh2ZCwgX3ZkLCAmaGVhZCwgbm9kZSkg
eworCQlzdHJ1Y3QgdWRtYV9jaGFuICp1YyA9IHRvX3VkbWFfY2hhbih2ZC0+dHguY2hhbik7CisJ
CXN0cnVjdCB1ZG1hX2Rlc2MgKmQgPSB0b191ZG1hX2Rlc2MoJnZkLT50eCk7CisKKwkJdWRtYV9m
cmVlX2h3ZGVzYyh1YywgZCk7CisJCWxpc3RfZGVsKCZ2ZC0+bm9kZSk7CisJCWtmcmVlKGQpOwor
CX0KKworCS8qIElmIG1vcmUgdG8gcHVyZ2UsIHNjaGVkdWxlIHRoZSB3b3JrIGFnYWluICovCisJ
aWYgKCFsaXN0X2VtcHR5KCZ1ZC0+ZGVzY190b19wdXJnZSkpCisJCXNjaGVkdWxlX3dvcmsoJnVk
LT5wdXJnZV93b3JrKTsKK30KKworc3RhdGljIHZvaWQgdWRtYV9kZXNjX2ZyZWUoc3RydWN0IHZp
cnRfZG1hX2Rlc2MgKnZkKQoreworCXN0cnVjdCB1ZG1hX2RldiAqdWQgPSB0b191ZG1hX2Rldih2
ZC0+dHguY2hhbi0+ZGV2aWNlKTsKKwlzdHJ1Y3QgdWRtYV9jaGFuICp1YyA9IHRvX3VkbWFfY2hh
bih2ZC0+dHguY2hhbik7CisJc3RydWN0IHVkbWFfZGVzYyAqZCA9IHRvX3VkbWFfZGVzYygmdmQt
PnR4KTsKKwl1bnNpZ25lZCBsb25nIGZsYWdzOworCisJaWYgKHVjLT50ZXJtaW5hdGVkX2Rlc2Mg
PT0gZCkKKwkJdWMtPnRlcm1pbmF0ZWRfZGVzYyA9IE5VTEw7CisKKwlpZiAodWMtPnVzZV9kbWFf
cG9vbCkgeworCQl1ZG1hX2ZyZWVfaHdkZXNjKHVjLCBkKTsKKwkJa2ZyZWUoZCk7CisJCXJldHVy
bjsKKwl9CisKKwlzcGluX2xvY2tfaXJxc2F2ZSgmdWQtPmxvY2ssIGZsYWdzKTsKKwlsaXN0X2Fk
ZF90YWlsKCZ2ZC0+bm9kZSwgJnVkLT5kZXNjX3RvX3B1cmdlKTsKKwlzcGluX3VubG9ja19pcnFy
ZXN0b3JlKCZ1ZC0+bG9jaywgZmxhZ3MpOworCisJc2NoZWR1bGVfd29yaygmdWQtPnB1cmdlX3dv
cmspOworfQorCitzdGF0aWMgYm9vbCB1ZG1hX2lzX2NoYW5fcnVubmluZyhzdHJ1Y3QgdWRtYV9j
aGFuICp1YykKK3sKKwl1MzIgdHJ0X2N0bCA9IDA7CisJdTMyIHJydF9jdGwgPSAwOworCisJaWYg
KHVjLT50Y2hhbikKKwkJdHJ0X2N0bCA9IHVkbWFfdGNoYW5ydF9yZWFkKHVjLT50Y2hhbiwgVURN
QV9UQ0hBTl9SVF9DVExfUkVHKTsKKwlpZiAodWMtPnJjaGFuKQorCQlycnRfY3RsID0gdWRtYV9y
Y2hhbnJ0X3JlYWQodWMtPnJjaGFuLCBVRE1BX1JDSEFOX1JUX0NUTF9SRUcpOworCisJaWYgKHRy
dF9jdGwgJiBVRE1BX0NIQU5fUlRfQ1RMX0VOIHx8IHJydF9jdGwgJiBVRE1BX0NIQU5fUlRfQ1RM
X0VOKQorCQlyZXR1cm4gdHJ1ZTsKKworCXJldHVybiBmYWxzZTsKK30KKworc3RhdGljIHZvaWQg
dWRtYV9zeW5jX2Zvcl9kZXZpY2Uoc3RydWN0IHVkbWFfY2hhbiAqdWMsIGludCBpZHgpCit7CisJ
c3RydWN0IHVkbWFfZGVzYyAqZCA9IHVjLT5kZXNjOworCisJaWYgKHVjLT5jeWNsaWMgJiYgdWMt
PnBrdF9tb2RlKSB7CisJCWRtYV9zeW5jX3NpbmdsZV9mb3JfZGV2aWNlKHVjLT51ZC0+ZGV2LAor
CQkJCQkgICBkLT5od2Rlc2NbaWR4XS5jcHBpNV9kZXNjX3BhZGRyLAorCQkJCQkgICBkLT5od2Rl
c2NbaWR4XS5jcHBpNV9kZXNjX3NpemUsCisJCQkJCSAgIERNQV9UT19ERVZJQ0UpOworCX0gZWxz
ZSB7CisJCWludCBpOworCisJCWZvciAoaSA9IDA7IGkgPCBkLT5od2Rlc2NfY291bnQ7IGkrKykg
eworCQkJaWYgKCFkLT5od2Rlc2NbaV0uY3BwaTVfZGVzY192YWRkcikKKwkJCQljb250aW51ZTsK
KworCQkJZG1hX3N5bmNfc2luZ2xlX2Zvcl9kZXZpY2UodWMtPnVkLT5kZXYsCisJCQkJCQlkLT5o
d2Rlc2NbaV0uY3BwaTVfZGVzY19wYWRkciwKKwkJCQkJCWQtPmh3ZGVzY1tpXS5jcHBpNV9kZXNj
X3NpemUsCisJCQkJCQlETUFfVE9fREVWSUNFKTsKKwkJfQorCX0KK30KKworc3RhdGljIGludCB1
ZG1hX3B1c2hfdG9fcmluZyhzdHJ1Y3QgdWRtYV9jaGFuICp1YywgaW50IGlkeCkKK3sKKwlzdHJ1
Y3QgdWRtYV9kZXNjICpkID0gdWMtPmRlc2M7CisKKwlzdHJ1Y3QgazNfcmluZyAqcmluZyA9IE5V
TEw7CisJaW50IHJldCA9IC1FSU5WQUw7CisKKwlzd2l0Y2ggKHVjLT5kaXIpIHsKKwljYXNlIERN
QV9ERVZfVE9fTUVNOgorCQlyaW5nID0gdWMtPnJmbG93LT5mZF9yaW5nOworCQlicmVhazsKKwlj
YXNlIERNQV9NRU1fVE9fREVWOgorCWNhc2UgRE1BX01FTV9UT19NRU06CisJCXJpbmcgPSB1Yy0+
dGNoYW4tPnRfcmluZzsKKwkJYnJlYWs7CisJZGVmYXVsdDoKKwkJYnJlYWs7CisJfQorCisJaWYg
KHJpbmcpIHsKKwkJZG1hX2FkZHJfdCBkZXNjX2FkZHIgPSB1ZG1hX2N1cnJfY3BwaTVfZGVzY19w
YWRkcihkLCBpZHgpOworCisJCXdtYigpOyAvKiBFbnN1cmUgdGhhdCB3cml0ZXMgYXJlIG5vdCBt
b3ZlZCBvdmVyIHRoaXMgcG9pbnQgKi8KKwkJdWRtYV9zeW5jX2Zvcl9kZXZpY2UodWMsIGlkeCk7
CisJCXJldCA9IGszX3JpbmdhY2NfcmluZ19wdXNoKHJpbmcsICZkZXNjX2FkZHIpOworCQl1Yy0+
aW5fcmluZ19jbnQrKzsKKwl9CisKKwlyZXR1cm4gcmV0OworfQorCitzdGF0aWMgaW50IHVkbWFf
cG9wX2Zyb21fcmluZyhzdHJ1Y3QgdWRtYV9jaGFuICp1YywgZG1hX2FkZHJfdCAqYWRkcikKK3sK
KwlzdHJ1Y3QgazNfcmluZyAqcmluZyA9IE5VTEw7CisJaW50IHJldCA9IC1FTk9FTlQ7CisKKwlz
d2l0Y2ggKHVjLT5kaXIpIHsKKwljYXNlIERNQV9ERVZfVE9fTUVNOgorCQlyaW5nID0gdWMtPnJm
bG93LT5yX3Jpbmc7CisJCWJyZWFrOworCWNhc2UgRE1BX01FTV9UT19ERVY6CisJY2FzZSBETUFf
TUVNX1RPX01FTToKKwkJcmluZyA9IHVjLT50Y2hhbi0+dGNfcmluZzsKKwkJYnJlYWs7CisJZGVm
YXVsdDoKKwkJYnJlYWs7CisJfQorCisJaWYgKHJpbmcgJiYgazNfcmluZ2FjY19yaW5nX2dldF9v
Y2MocmluZykpIHsKKwkJc3RydWN0IHVkbWFfZGVzYyAqZCA9IE5VTEw7CisKKwkJcmV0ID0gazNf
cmluZ2FjY19yaW5nX3BvcChyaW5nLCBhZGRyKTsKKwkJaWYgKHJldCkKKwkJCXJldHVybiByZXQ7
CisKKwkJLyogVGVhcmRvd24gY29tcGxldGlvbiAqLworCQlpZiAoY3BwaTVfZGVzY19pc190ZGNt
KCphZGRyKSkKKwkJCXJldHVybiByZXQ7CisKKwkJZCA9IHVkbWFfdWRtYV9kZXNjX2Zyb21fcGFk
ZHIodWMsICphZGRyKTsKKworCQlpZiAoZCkKKwkJCWRtYV9zeW5jX3NpbmdsZV9mb3JfY3B1KHVj
LT51ZC0+ZGV2LCAqYWRkciwKKwkJCQkJCWQtPmh3ZGVzY1swXS5jcHBpNV9kZXNjX3NpemUsCisJ
CQkJCQlETUFfRlJPTV9ERVZJQ0UpOworCQlybWIoKTsgLyogRW5zdXJlIHRoYXQgcmVhZHMgYXJl
IG5vdCBtb3ZlZCBiZWZvcmUgdGhpcyBwb2ludCAqLworCisJCWlmICghcmV0KQorCQkJdWMtPmlu
X3JpbmdfY250LS07CisJfQorCisJcmV0dXJuIHJldDsKK30KKworc3RhdGljIHZvaWQgdWRtYV9y
ZXNldF9yaW5ncyhzdHJ1Y3QgdWRtYV9jaGFuICp1YykKK3sKKwlzdHJ1Y3QgazNfcmluZyAqcmlu
ZzEgPSBOVUxMOworCXN0cnVjdCBrM19yaW5nICpyaW5nMiA9IE5VTEw7CisKKwlzd2l0Y2ggKHVj
LT5kaXIpIHsKKwljYXNlIERNQV9ERVZfVE9fTUVNOgorCQlpZiAodWMtPnJjaGFuKSB7CisJCQly
aW5nMSA9IHVjLT5yZmxvdy0+ZmRfcmluZzsKKwkJCXJpbmcyID0gdWMtPnJmbG93LT5yX3Jpbmc7
CisJCX0KKwkJYnJlYWs7CisJY2FzZSBETUFfTUVNX1RPX0RFVjoKKwljYXNlIERNQV9NRU1fVE9f
TUVNOgorCQlpZiAodWMtPnRjaGFuKSB7CisJCQlyaW5nMSA9IHVjLT50Y2hhbi0+dF9yaW5nOwor
CQkJcmluZzIgPSB1Yy0+dGNoYW4tPnRjX3Jpbmc7CisJCX0KKwkJYnJlYWs7CisJZGVmYXVsdDoK
KwkJYnJlYWs7CisJfQorCisJaWYgKHJpbmcxKQorCQlrM19yaW5nYWNjX3JpbmdfcmVzZXRfZG1h
KHJpbmcxLAorCQkJCQkgIGszX3JpbmdhY2NfcmluZ19nZXRfb2NjKHJpbmcxKSk7CisJaWYgKHJp
bmcyKQorCQlrM19yaW5nYWNjX3JpbmdfcmVzZXQocmluZzIpOworCisJLyogbWFrZSBzdXJlIHdl
IGFyZSBub3QgbGVha2luZyBtZW1vcnkgYnkgc3RhbGxlZCBkZXNjcmlwdG9yICovCisJaWYgKHVj
LT50ZXJtaW5hdGVkX2Rlc2MpIHsKKwkJdWRtYV9kZXNjX2ZyZWUoJnVjLT50ZXJtaW5hdGVkX2Rl
c2MtPnZkKTsKKwkJdWMtPnRlcm1pbmF0ZWRfZGVzYyA9IE5VTEw7CisJfQorCisJdWMtPmluX3Jp
bmdfY250ID0gMDsKK30KKworc3RhdGljIHZvaWQgdWRtYV9yZXNldF9jb3VudGVycyhzdHJ1Y3Qg
dWRtYV9jaGFuICp1YykKK3sKKwl1MzIgdmFsOworCisJaWYgKHVjLT50Y2hhbikgeworCQl2YWwg
PSB1ZG1hX3RjaGFucnRfcmVhZCh1Yy0+dGNoYW4sIFVETUFfVENIQU5fUlRfQkNOVF9SRUcpOwor
CQl1ZG1hX3RjaGFucnRfd3JpdGUodWMtPnRjaGFuLCBVRE1BX1RDSEFOX1JUX0JDTlRfUkVHLCB2
YWwpOworCisJCXZhbCA9IHVkbWFfdGNoYW5ydF9yZWFkKHVjLT50Y2hhbiwgVURNQV9UQ0hBTl9S
VF9TQkNOVF9SRUcpOworCQl1ZG1hX3RjaGFucnRfd3JpdGUodWMtPnRjaGFuLCBVRE1BX1RDSEFO
X1JUX1NCQ05UX1JFRywgdmFsKTsKKworCQl2YWwgPSB1ZG1hX3RjaGFucnRfcmVhZCh1Yy0+dGNo
YW4sIFVETUFfVENIQU5fUlRfUENOVF9SRUcpOworCQl1ZG1hX3RjaGFucnRfd3JpdGUodWMtPnRj
aGFuLCBVRE1BX1RDSEFOX1JUX1BDTlRfUkVHLCB2YWwpOworCisJCXZhbCA9IHVkbWFfdGNoYW5y
dF9yZWFkKHVjLT50Y2hhbiwgVURNQV9UQ0hBTl9SVF9QRUVSX0JDTlRfUkVHKTsKKwkJdWRtYV90
Y2hhbnJ0X3dyaXRlKHVjLT50Y2hhbiwgVURNQV9UQ0hBTl9SVF9QRUVSX0JDTlRfUkVHLCB2YWwp
OworCX0KKworCWlmICh1Yy0+cmNoYW4pIHsKKwkJdmFsID0gdWRtYV9yY2hhbnJ0X3JlYWQodWMt
PnJjaGFuLCBVRE1BX1JDSEFOX1JUX0JDTlRfUkVHKTsKKwkJdWRtYV9yY2hhbnJ0X3dyaXRlKHVj
LT5yY2hhbiwgVURNQV9SQ0hBTl9SVF9CQ05UX1JFRywgdmFsKTsKKworCQl2YWwgPSB1ZG1hX3Jj
aGFucnRfcmVhZCh1Yy0+cmNoYW4sIFVETUFfUkNIQU5fUlRfU0JDTlRfUkVHKTsKKwkJdWRtYV9y
Y2hhbnJ0X3dyaXRlKHVjLT5yY2hhbiwgVURNQV9SQ0hBTl9SVF9TQkNOVF9SRUcsIHZhbCk7CisK
KwkJdmFsID0gdWRtYV9yY2hhbnJ0X3JlYWQodWMtPnJjaGFuLCBVRE1BX1JDSEFOX1JUX1BDTlRf
UkVHKTsKKwkJdWRtYV9yY2hhbnJ0X3dyaXRlKHVjLT5yY2hhbiwgVURNQV9SQ0hBTl9SVF9QQ05U
X1JFRywgdmFsKTsKKworCQl2YWwgPSB1ZG1hX3JjaGFucnRfcmVhZCh1Yy0+cmNoYW4sIFVETUFf
UkNIQU5fUlRfUEVFUl9CQ05UX1JFRyk7CisJCXVkbWFfcmNoYW5ydF93cml0ZSh1Yy0+cmNoYW4s
IFVETUFfUkNIQU5fUlRfUEVFUl9CQ05UX1JFRywgdmFsKTsKKwl9CisKKwl1Yy0+YmNudCA9IDA7
Cit9CisKK3N0YXRpYyBpbnQgdWRtYV9yZXNldF9jaGFuKHN0cnVjdCB1ZG1hX2NoYW4gKnVjLCBi
b29sIGhhcmQpCit7CisJc3dpdGNoICh1Yy0+ZGlyKSB7CisJY2FzZSBETUFfREVWX1RPX01FTToK
KwkJdWRtYV9yY2hhbnJ0X3dyaXRlKHVjLT5yY2hhbiwgVURNQV9SQ0hBTl9SVF9QRUVSX1JUX0VO
X1JFRywgMCk7CisJCXVkbWFfcmNoYW5ydF93cml0ZSh1Yy0+cmNoYW4sIFVETUFfUkNIQU5fUlRf
Q1RMX1JFRywgMCk7CisJCWJyZWFrOworCWNhc2UgRE1BX01FTV9UT19ERVY6CisJCXVkbWFfdGNo
YW5ydF93cml0ZSh1Yy0+dGNoYW4sIFVETUFfVENIQU5fUlRfQ1RMX1JFRywgMCk7CisJCXVkbWFf
dGNoYW5ydF93cml0ZSh1Yy0+dGNoYW4sIFVETUFfVENIQU5fUlRfUEVFUl9SVF9FTl9SRUcsIDAp
OworCQlicmVhazsKKwljYXNlIERNQV9NRU1fVE9fTUVNOgorCQl1ZG1hX3JjaGFucnRfd3JpdGUo
dWMtPnJjaGFuLCBVRE1BX1JDSEFOX1JUX0NUTF9SRUcsIDApOworCQl1ZG1hX3RjaGFucnRfd3Jp
dGUodWMtPnRjaGFuLCBVRE1BX1RDSEFOX1JUX0NUTF9SRUcsIDApOworCQlicmVhazsKKwlkZWZh
dWx0OgorCQlyZXR1cm4gLUVJTlZBTDsKKwl9CisKKwkvKiBSZXNldCBhbGwgY291bnRlcnMgKi8K
Kwl1ZG1hX3Jlc2V0X2NvdW50ZXJzKHVjKTsKKworCS8qIEhhcmQgcmVzZXQ6IHJlLWluaXRpYWxp
emUgdGhlIGNoYW5uZWwgdG8gcmVzZXQgKi8KKwlpZiAoaGFyZCkgeworCQlzdHJ1Y3QgdWRtYV9j
aGFuIHVjX2JhY2t1cCA9ICp1YzsKKwkJaW50IHJldDsKKworCQl1Yy0+dWQtPmRkZXYuZGV2aWNl
X2ZyZWVfY2hhbl9yZXNvdXJjZXMoJnVjLT52Yy5jaGFuKTsKKwkJLyogcmVzdG9yZSB0aGUgY2hh
bm5lbCBjb25maWd1cmF0aW9uICovCisJCXVjLT5kaXIgPSB1Y19iYWNrdXAuZGlyOworCQl1Yy0+
cmVtb3RlX3RocmVhZF9pZCA9IHVjX2JhY2t1cC5yZW1vdGVfdGhyZWFkX2lkOworCQl1Yy0+cGt0
X21vZGUgPSB1Y19iYWNrdXAucGt0X21vZGU7CisJCXVjLT5lcF90eXBlID0gdWNfYmFja3VwLmVw
X3R5cGU7CisJCXVjLT5lbmFibGVfYWNjMzIgPSB1Y19iYWNrdXAuZW5hYmxlX2FjYzMyOworCQl1
Yy0+ZW5hYmxlX2J1cnN0ID0gdWNfYmFja3VwLmVuYWJsZV9idXJzdDsKKwkJdWMtPmNoYW5uZWxf
dHBsID0gdWNfYmFja3VwLmNoYW5uZWxfdHBsOworCQl1Yy0+cHNkX3NpemUgPSB1Y19iYWNrdXAu
cHNkX3NpemU7CisJCXVjLT5tZXRhZGF0YV9zaXplID0gdWNfYmFja3VwLm1ldGFkYXRhX3NpemU7
CisJCXVjLT5oZGVzY19zaXplID0gdWNfYmFja3VwLmhkZXNjX3NpemU7CisJCXVjLT5ub3RkcGt0
ID0gdWNfYmFja3VwLm5vdGRwa3Q7CisKKwkJcmV0ID0gdWMtPnVkLT5kZGV2LmRldmljZV9hbGxv
Y19jaGFuX3Jlc291cmNlcygmdWMtPnZjLmNoYW4pOworCQlpZiAocmV0KQorCQkJcmV0dXJuIHJl
dDsKKwl9CisJdWMtPnN0YXRlID0gVURNQV9DSEFOX0lTX0lETEU7CisKKwlyZXR1cm4gMDsKK30K
Kworc3RhdGljIHZvaWQgdWRtYV9zdGFydF9kZXNjKHN0cnVjdCB1ZG1hX2NoYW4gKnVjKQorewor
CWlmICh1Yy0+cGt0X21vZGUgJiYgKHVjLT5jeWNsaWMgfHwgdWMtPmRpciA9PSBETUFfREVWX1RP
X01FTSkpIHsKKwkJaW50IGk7CisKKwkJLyogUHVzaCBhbGwgZGVzY3JpcHRvcnMgdG8gcmluZyBm
b3IgcGFja2V0IG1vZGUgY3ljbGljIG9yIFJYICovCisJCWZvciAoaSA9IDA7IGkgPCB1Yy0+ZGVz
Yy0+c2dsZW47IGkrKykKKwkJCXVkbWFfcHVzaF90b19yaW5nKHVjLCBpKTsKKwl9IGVsc2Ugewor
CQl1ZG1hX3B1c2hfdG9fcmluZyh1YywgMCk7CisJfQorfQorCitzdGF0aWMgYm9vbCB1ZG1hX2No
YW5fbmVlZHNfcmVjb25maWd1cmF0aW9uKHN0cnVjdCB1ZG1hX2NoYW4gKnVjKQoreworCS8qIE9u
bHkgUERNQXMgaGF2ZSBzdGF0aWNUUiAqLworCWlmICh1Yy0+ZXBfdHlwZSA9PSBQU0lMX0VQX05B
VElWRSkKKwkJcmV0dXJuIGZhbHNlOworCisJLyogQ2hlY2sgaWYgdGhlIHN0YXRpY1RSIGNvbmZp
Z3VyYXRpb24gaGFzIGNoYW5nZWQgZm9yIFRYICovCisJaWYgKG1lbWNtcCgmdWMtPnN0YXRpY190
ciwgJnVjLT5kZXNjLT5zdGF0aWNfdHIsIHNpemVvZih1Yy0+c3RhdGljX3RyKSkpCisJCXJldHVy
biB0cnVlOworCisJcmV0dXJuIGZhbHNlOworfQorCitzdGF0aWMgaW50IHVkbWFfc3RhcnQoc3Ry
dWN0IHVkbWFfY2hhbiAqdWMpCit7CisJc3RydWN0IHZpcnRfZG1hX2Rlc2MgKnZkID0gdmNoYW5f
bmV4dF9kZXNjKCZ1Yy0+dmMpOworCisJaWYgKCF2ZCkgeworCQl1Yy0+ZGVzYyA9IE5VTEw7CisJ
CXJldHVybiAtRU5PRU5UOworCX0KKworCWxpc3RfZGVsKCZ2ZC0+bm9kZSk7CisKKwl1Yy0+ZGVz
YyA9IHRvX3VkbWFfZGVzYygmdmQtPnR4KTsKKworCS8qIENoYW5uZWwgaXMgYWxyZWFkeSBydW5u
aW5nIGFuZCBkb2VzIG5vdCBuZWVkIHJlY29uZmlndXJhdGlvbiAqLworCWlmICh1ZG1hX2lzX2No
YW5fcnVubmluZyh1YykgJiYgIXVkbWFfY2hhbl9uZWVkc19yZWNvbmZpZ3VyYXRpb24odWMpKSB7
CisJCXVkbWFfc3RhcnRfZGVzYyh1Yyk7CisJCWdvdG8gb3V0OworCX0KKworCS8qIE1ha2Ugc3Vy
ZSB0aGF0IHdlIGNsZWFyIHRoZSB0ZWFyZG93biBiaXQsIGlmIGl0IGlzIHNldCAqLworCXVkbWFf
cmVzZXRfY2hhbih1YywgZmFsc2UpOworCisJLyogUHVzaCBkZXNjcmlwdG9ycyBiZWZvcmUgd2Ug
c3RhcnQgdGhlIGNoYW5uZWwgKi8KKwl1ZG1hX3N0YXJ0X2Rlc2ModWMpOworCisJc3dpdGNoICh1
Yy0+ZGVzYy0+ZGlyKSB7CisJY2FzZSBETUFfREVWX1RPX01FTToKKwkJLyogQ29uZmlnIHJlbW90
ZSBUUiAqLworCQlpZiAodWMtPmVwX3R5cGUgPT0gUFNJTF9FUF9QRE1BX1hZKSB7CisJCQl1MzIg
dmFsID0gUERNQV9TVEFUSUNfVFJfWSh1Yy0+ZGVzYy0+c3RhdGljX3RyLmVsY250KSB8CisJCQkJ
ICBQRE1BX1NUQVRJQ19UUl9YKHVjLT5kZXNjLT5zdGF0aWNfdHIuZWxzaXplKTsKKwkJCWNvbnN0
IHN0cnVjdCB1ZG1hX21hdGNoX2RhdGEgKm1hdGNoX2RhdGEgPQorCQkJCQkJCXVjLT51ZC0+bWF0
Y2hfZGF0YTsKKworCQkJaWYgKHVjLT5lbmFibGVfYWNjMzIpCisJCQkJdmFsIHw9IFBETUFfU1RB
VElDX1RSX1hZX0FDQzMyOworCQkJaWYgKHVjLT5lbmFibGVfYnVyc3QpCisJCQkJdmFsIHw9IFBE
TUFfU1RBVElDX1RSX1hZX0JVUlNUOworCisJCQl1ZG1hX3JjaGFucnRfd3JpdGUodWMtPnJjaGFu
LAorCQkJCVVETUFfUkNIQU5fUlRfUEVFUl9TVEFUSUNfVFJfWFlfUkVHLCB2YWwpOworCisJCQl1
ZG1hX3JjaGFucnRfd3JpdGUodWMtPnJjaGFuLAorCQkJCVVETUFfUkNIQU5fUlRfUEVFUl9TVEFU
SUNfVFJfWl9SRUcsCisJCQkJUERNQV9TVEFUSUNfVFJfWih1Yy0+ZGVzYy0+c3RhdGljX3RyLmJz
dGNudCwKKwkJCQkJCSBtYXRjaF9kYXRhLT5zdGF0aWN0cl96X21hc2spKTsKKworCQkJLyogc2F2
ZSB0aGUgY3VycmVudCBzdGF0aWNUUiBjb25maWd1cmF0aW9uICovCisJCQltZW1jcHkoJnVjLT5z
dGF0aWNfdHIsICZ1Yy0+ZGVzYy0+c3RhdGljX3RyLAorCQkJICAgICAgIHNpemVvZih1Yy0+c3Rh
dGljX3RyKSk7CisJCX0KKworCQl1ZG1hX3JjaGFucnRfd3JpdGUodWMtPnJjaGFuLCBVRE1BX1JD
SEFOX1JUX0NUTF9SRUcsCisJCQkJICAgVURNQV9DSEFOX1JUX0NUTF9FTik7CisKKwkJLyogRW5h
YmxlIHJlbW90ZSAqLworCQl1ZG1hX3JjaGFucnRfd3JpdGUodWMtPnJjaGFuLCBVRE1BX1JDSEFO
X1JUX1BFRVJfUlRfRU5fUkVHLAorCQkJCSAgIFVETUFfUEVFUl9SVF9FTl9FTkFCTEUpOworCisJ
CWJyZWFrOworCWNhc2UgRE1BX01FTV9UT19ERVY6CisJCS8qIENvbmZpZyByZW1vdGUgVFIgKi8K
KwkJaWYgKHVjLT5lcF90eXBlID09IFBTSUxfRVBfUERNQV9YWSkgeworCQkJdTMyIHZhbCA9IFBE
TUFfU1RBVElDX1RSX1kodWMtPmRlc2MtPnN0YXRpY190ci5lbGNudCkgfAorCQkJCSAgUERNQV9T
VEFUSUNfVFJfWCh1Yy0+ZGVzYy0+c3RhdGljX3RyLmVsc2l6ZSk7CisKKwkJCWlmICh1Yy0+ZW5h
YmxlX2FjYzMyKQorCQkJCXZhbCB8PSBQRE1BX1NUQVRJQ19UUl9YWV9BQ0MzMjsKKwkJCWlmICh1
Yy0+ZW5hYmxlX2J1cnN0KQorCQkJCXZhbCB8PSBQRE1BX1NUQVRJQ19UUl9YWV9CVVJTVDsKKwor
CQkJdWRtYV90Y2hhbnJ0X3dyaXRlKHVjLT50Y2hhbiwKKwkJCQlVRE1BX1RDSEFOX1JUX1BFRVJf
U1RBVElDX1RSX1hZX1JFRywgdmFsKTsKKworCQkJLyogc2F2ZSB0aGUgY3VycmVudCBzdGF0aWNU
UiBjb25maWd1cmF0aW9uICovCisJCQltZW1jcHkoJnVjLT5zdGF0aWNfdHIsICZ1Yy0+ZGVzYy0+
c3RhdGljX3RyLAorCQkJICAgICAgIHNpemVvZih1Yy0+c3RhdGljX3RyKSk7CisJCX0KKworCQkv
KiBFbmFibGUgcmVtb3RlICovCisJCXVkbWFfdGNoYW5ydF93cml0ZSh1Yy0+dGNoYW4sIFVETUFf
VENIQU5fUlRfUEVFUl9SVF9FTl9SRUcsCisJCQkJICAgVURNQV9QRUVSX1JUX0VOX0VOQUJMRSk7
CisKKwkJdWRtYV90Y2hhbnJ0X3dyaXRlKHVjLT50Y2hhbiwgVURNQV9UQ0hBTl9SVF9DVExfUkVH
LAorCQkJCSAgIFVETUFfQ0hBTl9SVF9DVExfRU4pOworCisJCWJyZWFrOworCWNhc2UgRE1BX01F
TV9UT19NRU06CisJCXVkbWFfcmNoYW5ydF93cml0ZSh1Yy0+cmNoYW4sIFVETUFfUkNIQU5fUlRf
Q1RMX1JFRywKKwkJCQkgICBVRE1BX0NIQU5fUlRfQ1RMX0VOKTsKKwkJdWRtYV90Y2hhbnJ0X3dy
aXRlKHVjLT50Y2hhbiwgVURNQV9UQ0hBTl9SVF9DVExfUkVHLAorCQkJCSAgIFVETUFfQ0hBTl9S
VF9DVExfRU4pOworCisJCWJyZWFrOworCWRlZmF1bHQ6CisJCXJldHVybiAtRUlOVkFMOworCX0K
KworCXVjLT5zdGF0ZSA9IFVETUFfQ0hBTl9JU19BQ1RJVkU7CitvdXQ6CisKKwlyZXR1cm4gMDsK
K30KKworc3RhdGljIGludCB1ZG1hX3N0b3Aoc3RydWN0IHVkbWFfY2hhbiAqdWMpCit7CisJZW51
bSB1ZG1hX2NoYW5fc3RhdGUgb2xkX3N0YXRlID0gdWMtPnN0YXRlOworCisJdWMtPnN0YXRlID0g
VURNQV9DSEFOX0lTX1RFUk1JTkFUSU5HOworCXJlaW5pdF9jb21wbGV0aW9uKCZ1Yy0+dGVhcmRv
d25fY29tcGxldGVkKTsKKworCXN3aXRjaCAodWMtPmRpcikgeworCWNhc2UgRE1BX0RFVl9UT19N
RU06CisJCXVkbWFfcmNoYW5ydF93cml0ZSh1Yy0+cmNoYW4sIFVETUFfUkNIQU5fUlRfUEVFUl9S
VF9FTl9SRUcsCisJCQkJICAgVURNQV9QRUVSX1JUX0VOX0VOQUJMRSB8CisJCQkJICAgVURNQV9Q
RUVSX1JUX0VOX1RFQVJET1dOKTsKKwkJYnJlYWs7CisJY2FzZSBETUFfTUVNX1RPX0RFVjoKKwkJ
dWRtYV90Y2hhbnJ0X3dyaXRlKHVjLT50Y2hhbiwgVURNQV9UQ0hBTl9SVF9QRUVSX1JUX0VOX1JF
RywKKwkJCQkgICBVRE1BX1BFRVJfUlRfRU5fRU5BQkxFIHwKKwkJCQkgICBVRE1BX1BFRVJfUlRf
RU5fRkxVU0gpOworCQl1ZG1hX3RjaGFucnRfd3JpdGUodWMtPnRjaGFuLCBVRE1BX1RDSEFOX1JU
X0NUTF9SRUcsCisJCQkJICAgVURNQV9DSEFOX1JUX0NUTF9FTiB8CisJCQkJICAgVURNQV9DSEFO
X1JUX0NUTF9URE9XTik7CisJCWJyZWFrOworCWNhc2UgRE1BX01FTV9UT19NRU06CisJCXVkbWFf
dGNoYW5ydF93cml0ZSh1Yy0+dGNoYW4sIFVETUFfVENIQU5fUlRfQ1RMX1JFRywKKwkJCQkgICBV
RE1BX0NIQU5fUlRfQ1RMX0VOIHwKKwkJCQkgICBVRE1BX0NIQU5fUlRfQ1RMX1RET1dOKTsKKwkJ
YnJlYWs7CisJZGVmYXVsdDoKKwkJdWMtPnN0YXRlID0gb2xkX3N0YXRlOworCQljb21wbGV0ZV9h
bGwoJnVjLT50ZWFyZG93bl9jb21wbGV0ZWQpOworCQlyZXR1cm4gLUVJTlZBTDsKKwl9CisKKwly
ZXR1cm4gMDsKK30KKworc3RhdGljIHZvaWQgdWRtYV9jeWNsaWNfcGFja2V0X2VsYXBzZWQoc3Ry
dWN0IHVkbWFfY2hhbiAqdWMpCit7CisJc3RydWN0IHVkbWFfZGVzYyAqZCA9IHVjLT5kZXNjOwor
CXN0cnVjdCBjcHBpNV9ob3N0X2Rlc2NfdCAqaF9kZXNjOworCisJaF9kZXNjID0gZC0+aHdkZXNj
W2QtPmRlc2NfaWR4XS5jcHBpNV9kZXNjX3ZhZGRyOworCWNwcGk1X2hkZXNjX3Jlc2V0X3RvX29y
aWdpbmFsKGhfZGVzYyk7CisJdWRtYV9wdXNoX3RvX3JpbmcodWMsIGQtPmRlc2NfaWR4KTsKKwlk
LT5kZXNjX2lkeCA9IChkLT5kZXNjX2lkeCArIDEpICUgZC0+c2dsZW47Cit9CisKK3N0YXRpYyBp
bmxpbmUgdm9pZCB1ZG1hX2ZldGNoX2VwaWIoc3RydWN0IHVkbWFfY2hhbiAqdWMsIHN0cnVjdCB1
ZG1hX2Rlc2MgKmQpCit7CisJc3RydWN0IGNwcGk1X2hvc3RfZGVzY190ICpoX2Rlc2MgPSBkLT5o
d2Rlc2NbMF0uY3BwaTVfZGVzY192YWRkcjsKKworCW1lbWNweShkLT5tZXRhZGF0YSwgaF9kZXNj
LT5lcGliLCBkLT5tZXRhZGF0YV9zaXplKTsKK30KKworc3RhdGljIGJvb2wgdWRtYV9pc19kZXNj
X3JlYWxseV9kb25lKHN0cnVjdCB1ZG1hX2NoYW4gKnVjLCBzdHJ1Y3QgdWRtYV9kZXNjICpkKQor
eworCXUzMiBwZWVyX2JjbnQsIGJjbnQ7CisKKwkvKiBPbmx5IFRYIHRvd2FyZHMgUERNQSBpcyBh
ZmZlY3RlZCAqLworCWlmICh1Yy0+ZXBfdHlwZSA9PSBQU0lMX0VQX05BVElWRSB8fCB1Yy0+ZGly
ICE9IERNQV9NRU1fVE9fREVWKQorCQlyZXR1cm4gdHJ1ZTsKKworCXBlZXJfYmNudCA9IHVkbWFf
dGNoYW5ydF9yZWFkKHVjLT50Y2hhbiwgVURNQV9UQ0hBTl9SVF9QRUVSX0JDTlRfUkVHKTsKKwli
Y250ID0gdWRtYV90Y2hhbnJ0X3JlYWQodWMtPnRjaGFuLCBVRE1BX1RDSEFOX1JUX0JDTlRfUkVH
KTsKKworCWlmIChwZWVyX2JjbnQgPCBiY250KQorCQlyZXR1cm4gZmFsc2U7CisKKwlyZXR1cm4g
dHJ1ZTsKK30KKworc3RhdGljIHZvaWQgdWRtYV9mbHVzaF90eChzdHJ1Y3QgdWRtYV9jaGFuICp1
YykKK3sKKwlpZiAodWMtPmRpciAhPSBETUFfTUVNX1RPX0RFVikKKwkJcmV0dXJuOworCisJdWMt
PnN0YXRlID0gVURNQV9DSEFOX0lTX0FDVElWRV9GTFVTSDsKKworCXVkbWFfdGNoYW5ydF93cml0
ZSh1Yy0+dGNoYW4sIFVETUFfVENIQU5fUlRfQ1RMX1JFRywKKwkJCSAgIFVETUFfQ0hBTl9SVF9D
VExfRU4gfAorCQkJICAgVURNQV9DSEFOX1JUX0NUTF9URE9XTik7Cit9CisKK3N0YXRpYyBpcnFy
ZXR1cm5fdCB1ZG1hX3JpbmdfaXJxX2hhbmRsZXIoaW50IGlycSwgdm9pZCAqZGF0YSkKK3sKKwlz
dHJ1Y3QgdWRtYV9jaGFuICp1YyA9IGRhdGE7CisJc3RydWN0IHVkbWFfZGVzYyAqZDsKKwl1bnNp
Z25lZCBsb25nIGZsYWdzOworCWRtYV9hZGRyX3QgcGFkZHIgPSAwOworCisJaWYgKHVkbWFfcG9w
X2Zyb21fcmluZyh1YywgJnBhZGRyKSB8fCAhcGFkZHIpCisJCXJldHVybiBJUlFfSEFORExFRDsK
KworCXNwaW5fbG9ja19pcnFzYXZlKCZ1Yy0+dmMubG9jaywgZmxhZ3MpOworCisJLyogVGVhcmRv
d24gY29tcGxldGlvbiBtZXNzYWdlICovCisJaWYgKGNwcGk1X2Rlc2NfaXNfdGRjbShwYWRkcikp
IHsKKwkJLyogQ29tcGVuc2F0ZSBvdXIgaW50ZXJuYWwgcG9wL3B1c2ggY291bnRlciAqLworCQl1
Yy0+aW5fcmluZ19jbnQrKzsKKworCQljb21wbGV0ZV9hbGwoJnVjLT50ZWFyZG93bl9jb21wbGV0
ZWQpOworCisJCWlmICh1Yy0+dGVybWluYXRlZF9kZXNjKSB7CisJCQl1ZG1hX2Rlc2NfZnJlZSgm
dWMtPnRlcm1pbmF0ZWRfZGVzYy0+dmQpOworCQkJdWMtPnRlcm1pbmF0ZWRfZGVzYyA9IE5VTEw7
CisJCX0KKworCQlpZiAoIXVjLT5kZXNjKQorCQkJdWRtYV9zdGFydCh1Yyk7CisKKwkJaWYgKHVj
LT5zdGF0ZSAhPSBVRE1BX0NIQU5fSVNfQUNUSVZFX0ZMVVNIKQorCQkJZ290byBvdXQ7CisJCWVs
c2UgaWYgKHVjLT5kZXNjKQorCQkJcGFkZHIgPSB1ZG1hX2N1cnJfY3BwaTVfZGVzY19wYWRkcih1
Yy0+ZGVzYywKKwkJCQkJCQkgICB1Yy0+ZGVzYy0+ZGVzY19pZHgpOworCX0KKworCWQgPSB1ZG1h
X3VkbWFfZGVzY19mcm9tX3BhZGRyKHVjLCBwYWRkcik7CisKKwlpZiAoZCkgeworCQlkbWFfYWRk
cl90IGRlc2NfcGFkZHIgPSB1ZG1hX2N1cnJfY3BwaTVfZGVzY19wYWRkcihkLAorCQkJCQkJCQkg
ICBkLT5kZXNjX2lkeCk7CisJCWlmIChkZXNjX3BhZGRyICE9IHBhZGRyKSB7CisJCQlkZXZfZXJy
KHVjLT51ZC0+ZGV2LCAibm90IG1hdGNoaW5nIGRlc2NyaXB0b3JzIVxuIik7CisJCQlnb3RvIG91
dDsKKwkJfQorCisJCWlmICh1Yy0+Y3ljbGljKSB7CisJCQkvKiBwdXNoIHRoZSBkZXNjcmlwdG9y
IGJhY2sgdG8gdGhlIHJpbmcgKi8KKwkJCWlmIChkID09IHVjLT5kZXNjKSB7CisJCQkJdWRtYV9j
eWNsaWNfcGFja2V0X2VsYXBzZWQodWMpOworCQkJCXZjaGFuX2N5Y2xpY19jYWxsYmFjaygmZC0+
dmQpOworCQkJfQorCQl9IGVsc2UgeworCQkJYm9vbCBkZXNjX2RvbmUgPSB0cnVlOworCisJCQlp
ZiAoZCA9PSB1Yy0+ZGVzYykgeworCQkJCWRlc2NfZG9uZSA9IHVkbWFfaXNfZGVzY19yZWFsbHlf
ZG9uZSh1YywgZCk7CisKKwkJCQlpZiAoZGVzY19kb25lKSB7CisJCQkJCXVjLT5iY250ICs9IGQt
PnJlc2lkdWU7CisJCQkJCXVkbWFfc3RhcnQodWMpOworCQkJCX0gZWxzZSB7CisJCQkJCXVkbWFf
Zmx1c2hfdHgodWMpOworCQkJCX0KKwkJCX0gZWxzZSBpZiAoZCA9PSB1Yy0+dGVybWluYXRlZF9k
ZXNjKSB7CisJCQkJdWMtPnRlcm1pbmF0ZWRfZGVzYyA9IE5VTEw7CisJCQl9CisKKwkJCWlmIChk
ZXNjX2RvbmUpCisJCQkJdmNoYW5fY29va2llX2NvbXBsZXRlKCZkLT52ZCk7CisJCX0KKwl9Citv
dXQ6CisJc3Bpbl91bmxvY2tfaXJxcmVzdG9yZSgmdWMtPnZjLmxvY2ssIGZsYWdzKTsKKworCXJl
dHVybiBJUlFfSEFORExFRDsKK30KKworc3RhdGljIGlycXJldHVybl90IHVkbWFfdWRtYV9pcnFf
aGFuZGxlcihpbnQgaXJxLCB2b2lkICpkYXRhKQoreworCXN0cnVjdCB1ZG1hX2NoYW4gKnVjID0g
ZGF0YTsKKwlzdHJ1Y3QgdWRtYV9kZXNjICpkOworCXVuc2lnbmVkIGxvbmcgZmxhZ3M7CisKKwlz
cGluX2xvY2tfaXJxc2F2ZSgmdWMtPnZjLmxvY2ssIGZsYWdzKTsKKwlkID0gdWMtPmRlc2M7CisJ
aWYgKGQpIHsKKwkJZC0+dHJfaWR4ID0gKGQtPnRyX2lkeCArIDEpICUgZC0+c2dsZW47CisKKwkJ
aWYgKHVjLT5jeWNsaWMpIHsKKwkJCXZjaGFuX2N5Y2xpY19jYWxsYmFjaygmZC0+dmQpOworCQl9
IGVsc2UgeworCQkJLyogVE9ETzogZmlndXJlIG91dCB0aGUgcmVhbCBhbW91bnQgb2YgZGF0YSAq
LworCQkJdWMtPmJjbnQgKz0gZC0+cmVzaWR1ZTsKKwkJCXVkbWFfc3RhcnQodWMpOworCQkJdmNo
YW5fY29va2llX2NvbXBsZXRlKCZkLT52ZCk7CisJCX0KKwl9CisKKwlzcGluX3VubG9ja19pcnFy
ZXN0b3JlKCZ1Yy0+dmMubG9jaywgZmxhZ3MpOworCisJcmV0dXJuIElSUV9IQU5ETEVEOworfQpk
aWZmIC0tZ2l0IGEvZHJpdmVycy9kbWEvdGkvazMtdWRtYS5oIGIvZHJpdmVycy9kbWEvdGkvazMt
dWRtYS5oCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAwMC4uZmY0MjhmODIz
ZTY3Ci0tLSAvZGV2L251bGwKKysrIGIvZHJpdmVycy9kbWEvdGkvazMtdWRtYS5oCkBAIC0wLDAg
KzEsMTIwIEBACisvKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogR1BMLTIuMCAqLworLyoKKyAq
ICBDb3B5cmlnaHQgKEMpIDIwMTkgVGV4YXMgSW5zdHJ1bWVudHMgSW5jb3Jwb3JhdGVkIC0gaHR0
cDovL3d3dy50aS5jb20KKyAqLworCisjaWZuZGVmIEszX1VETUFfSF8KKyNkZWZpbmUgSzNfVURN
QV9IXworCisjaW5jbHVkZSA8bGludXgvc29jL3RpL3RpX3NjaV9wcm90b2NvbC5oPgorCisvKiBH
bG9iYWwgcmVnaXN0ZXJzICovCisjZGVmaW5lIFVETUFfUkVWX1JFRwkJCTB4MAorI2RlZmluZSBV
RE1BX1BFUkZfQ1RMX1JFRwkJMHg0CisjZGVmaW5lIFVETUFfRU1VX0NUTF9SRUcJCTB4OAorI2Rl
ZmluZSBVRE1BX1BTSUxfVE9fUkVHCQkweDEwCisjZGVmaW5lIFVETUFfVVRDX0NUTF9SRUcJCTB4
MWMKKyNkZWZpbmUgVURNQV9DQVBfUkVHKGkpCQkJKDB4MjAgKyAoKGkpICogNCkpCisjZGVmaW5l
IFVETUFfUlhfRkxPV19JRF9GV19PRVNfUkVHCTB4ODAKKyNkZWZpbmUgVURNQV9SWF9GTE9XX0lE
X0ZXX1NUQVRVU19SRUcJMHg4OAorCisvKiBUWCBjaGFuIFJUIHJlZ3MgKi8KKyNkZWZpbmUgVURN
QV9UQ0hBTl9SVF9DVExfUkVHCQkweDAKKyNkZWZpbmUgVURNQV9UQ0hBTl9SVF9TV1RSSUdfUkVH
CTB4OAorI2RlZmluZSBVRE1BX1RDSEFOX1JUX1NUREFUQV9SRUcJMHg4MAorCisjZGVmaW5lIFVE
TUFfVENIQU5fUlRfUEVFUl9SRUcoaSkJKDB4MjAwICsgKChpKSAqIDB4NCkpCisjZGVmaW5lIFVE
TUFfVENIQU5fUlRfUEVFUl9TVEFUSUNfVFJfWFlfUkVHCVwKKwlVRE1BX1RDSEFOX1JUX1BFRVJf
UkVHKDApCS8qIFBTSS1MOiAweDQwMCAqLworI2RlZmluZSBVRE1BX1RDSEFOX1JUX1BFRVJfU1RB
VElDX1RSX1pfUkVHCVwKKwlVRE1BX1RDSEFOX1JUX1BFRVJfUkVHKDEpCS8qIFBTSS1MOiAweDQw
MSAqLworI2RlZmluZSBVRE1BX1RDSEFOX1JUX1BFRVJfQkNOVF9SRUcJCVwKKwlVRE1BX1RDSEFO
X1JUX1BFRVJfUkVHKDQpCS8qIFBTSS1MOiAweDQwNCAqLworI2RlZmluZSBVRE1BX1RDSEFOX1JU
X1BFRVJfUlRfRU5fUkVHCQlcCisJVURNQV9UQ0hBTl9SVF9QRUVSX1JFRyg4KQkvKiBQU0ktTDog
MHg0MDggKi8KKworI2RlZmluZSBVRE1BX1RDSEFOX1JUX1BDTlRfUkVHCQkweDQwMAorI2RlZmlu
ZSBVRE1BX1RDSEFOX1JUX0JDTlRfUkVHCQkweDQwOAorI2RlZmluZSBVRE1BX1RDSEFOX1JUX1NC
Q05UX1JFRwkJMHg0MTAKKworLyogUlggY2hhbiBSVCByZWdzICovCisjZGVmaW5lIFVETUFfUkNI
QU5fUlRfQ1RMX1JFRwkJMHgwCisjZGVmaW5lIFVETUFfUkNIQU5fUlRfU1dUUklHX1JFRwkweDgK
KyNkZWZpbmUgVURNQV9SQ0hBTl9SVF9TVERBVEFfUkVHCTB4ODAKKworI2RlZmluZSBVRE1BX1JD
SEFOX1JUX1BFRVJfUkVHKGkpCSgweDIwMCArICgoaSkgKiAweDQpKQorI2RlZmluZSBVRE1BX1JD
SEFOX1JUX1BFRVJfU1RBVElDX1RSX1hZX1JFRwlcCisJVURNQV9SQ0hBTl9SVF9QRUVSX1JFRygw
KQkvKiBQU0ktTDogMHg0MDAgKi8KKyNkZWZpbmUgVURNQV9SQ0hBTl9SVF9QRUVSX1NUQVRJQ19U
Ul9aX1JFRwlcCisJVURNQV9SQ0hBTl9SVF9QRUVSX1JFRygxKQkvKiBQU0ktTDogMHg0MDEgKi8K
KyNkZWZpbmUgVURNQV9SQ0hBTl9SVF9QRUVSX0JDTlRfUkVHCQlcCisJVURNQV9SQ0hBTl9SVF9Q
RUVSX1JFRyg0KQkvKiBQU0ktTDogMHg0MDQgKi8KKyNkZWZpbmUgVURNQV9SQ0hBTl9SVF9QRUVS
X1JUX0VOX1JFRwkJXAorCVVETUFfUkNIQU5fUlRfUEVFUl9SRUcoOCkJLyogUFNJLUw6IDB4NDA4
ICovCisKKyNkZWZpbmUgVURNQV9SQ0hBTl9SVF9QQ05UX1JFRwkJMHg0MDAKKyNkZWZpbmUgVURN
QV9SQ0hBTl9SVF9CQ05UX1JFRwkJMHg0MDgKKyNkZWZpbmUgVURNQV9SQ0hBTl9SVF9TQkNOVF9S
RUcJCTB4NDEwCisKKy8qIFVETUFfVENIQU5fUlRfQ1RMX1JFRy9VRE1BX1JDSEFOX1JUX0NUTF9S
RUcgKi8KKyNkZWZpbmUgVURNQV9DSEFOX1JUX0NUTF9FTgkJQklUKDMxKQorI2RlZmluZSBVRE1B
X0NIQU5fUlRfQ1RMX1RET1dOCQlCSVQoMzApCisjZGVmaW5lIFVETUFfQ0hBTl9SVF9DVExfUEFV
U0UJCUJJVCgyOSkKKyNkZWZpbmUgVURNQV9DSEFOX1JUX0NUTF9GVERPV04JCUJJVCgyOCkKKyNk
ZWZpbmUgVURNQV9DSEFOX1JUX0NUTF9FUlJPUgkJQklUKDApCisKKy8qIFVETUFfVENIQU5fUlRf
UEVFUl9SVF9FTl9SRUcvVURNQV9SQ0hBTl9SVF9QRUVSX1JUX0VOX1JFRyAoUFNJLUw6IDB4NDA4
KSAqLworI2RlZmluZSBVRE1BX1BFRVJfUlRfRU5fRU5BQkxFCQlCSVQoMzEpCisjZGVmaW5lIFVE
TUFfUEVFUl9SVF9FTl9URUFSRE9XTglCSVQoMzApCisjZGVmaW5lIFVETUFfUEVFUl9SVF9FTl9Q
QVVTRQkJQklUKDI5KQorI2RlZmluZSBVRE1BX1BFRVJfUlRfRU5fRkxVU0gJCUJJVCgyOCkKKyNk
ZWZpbmUgVURNQV9QRUVSX1JUX0VOX0lETEUJCUJJVCgxKQorCisvKgorICogVURNQV9UQ0hBTl9S
VF9QRUVSX1NUQVRJQ19UUl9YWV9SRUcgLworICogVURNQV9SQ0hBTl9SVF9QRUVSX1NUQVRJQ19U
Ul9YWV9SRUcKKyAqLworI2RlZmluZSBQRE1BX1NUQVRJQ19UUl9YX01BU0sJCUdFTk1BU0soMjYs
IDI0KQorI2RlZmluZSBQRE1BX1NUQVRJQ19UUl9YX1NISUZUCQkoMjQpCisjZGVmaW5lIFBETUFf
U1RBVElDX1RSX1lfTUFTSwkJR0VOTUFTSygxMSwgMCkKKyNkZWZpbmUgUERNQV9TVEFUSUNfVFJf
WV9TSElGVAkJKDApCisKKyNkZWZpbmUgUERNQV9TVEFUSUNfVFJfWSh4KQlcCisJKCgoeCkgPDwg
UERNQV9TVEFUSUNfVFJfWV9TSElGVCkgJiBQRE1BX1NUQVRJQ19UUl9ZX01BU0spCisjZGVmaW5l
IFBETUFfU1RBVElDX1RSX1goeCkJXAorCSgoKHgpIDw8IFBETUFfU1RBVElDX1RSX1hfU0hJRlQp
ICYgUERNQV9TVEFUSUNfVFJfWF9NQVNLKQorCisjZGVmaW5lIFBETUFfU1RBVElDX1RSX1hZX0FD
QzMyCQlCSVQoMzApCisjZGVmaW5lIFBETUFfU1RBVElDX1RSX1hZX0JVUlNUCQlCSVQoMzEpCisK
Ky8qCisgKiBVRE1BX1RDSEFOX1JUX1BFRVJfU1RBVElDX1RSX1pfUkVHIC8KKyAqIFVETUFfUkNI
QU5fUlRfUEVFUl9TVEFUSUNfVFJfWl9SRUcKKyAqLworI2RlZmluZSBQRE1BX1NUQVRJQ19UUl9a
KHgsIG1hc2spCSgoeCkgJiAobWFzaykpCisKK3N0cnVjdCB1ZG1hX2RldjsKK3N0cnVjdCB1ZG1h
X3RjaGFuOworc3RydWN0IHVkbWFfcmNoYW47CitzdHJ1Y3QgdWRtYV9yZmxvdzsKKworZW51bSB1
ZG1hX3JtX3JhbmdlIHsKKwlSTV9SQU5HRV9UQ0hBTiA9IDAsCisJUk1fUkFOR0VfUkNIQU4sCisJ
Uk1fUkFOR0VfUkZMT1csCisJUk1fUkFOR0VfTEFTVCwKK307CisKK3N0cnVjdCB1ZG1hX3Rpc2Np
X3JtIHsKKwljb25zdCBzdHJ1Y3QgdGlfc2NpX2hhbmRsZSAqdGlzY2k7CisJY29uc3Qgc3RydWN0
IHRpX3NjaV9ybV91ZG1hcF9vcHMgKnRpc2NpX3VkbWFwX29wczsKKwl1MzIgIHRpc2NpX2Rldl9p
ZDsKKworCS8qIHRpc2NpIGluZm9ybWF0aW9uIGZvciBQU0ktTCB0aHJlYWQgcGFpcmluZy91bnBh
aXJpbmcgKi8KKwljb25zdCBzdHJ1Y3QgdGlfc2NpX3JtX3BzaWxfb3BzICp0aXNjaV9wc2lsX29w
czsKKwl1MzIgIHRpc2NpX25hdnNzX2Rldl9pZDsKKworCXN0cnVjdCB0aV9zY2lfcmVzb3VyY2Ug
KnJtX3Jhbmdlc1tSTV9SQU5HRV9MQVNUXTsKK307CisKKyNlbmRpZiAvKiBLM19VRE1BX0hfICov
Ci0tIApQZXRlcgoKVGV4YXMgSW5zdHJ1bWVudHMgRmlubGFuZCBPeSwgUG9ya2thbGFua2F0dSAy
MiwgMDAxODAgSGVsc2lua2kuClktdHVubnVzL0J1c2luZXNzIElEOiAwNjE1NTIxLTQuIEtvdGlw
YWlra2EvRG9taWNpbGU6IEhlbHNpbmtpCgoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX18KbGludXgtYXJtLWtlcm5lbCBtYWlsaW5nIGxpc3QKbGludXgtYXJt
LWtlcm5lbEBsaXN0cy5pbmZyYWRlYWQub3JnCmh0dHA6Ly9saXN0cy5pbmZyYWRlYWQub3JnL21h
aWxtYW4vbGlzdGluZm8vbGludXgtYXJtLWtlcm5lbAo=
